<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>MySafe - Digital Identity Service Architecture</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../assets/mkdocs_puml/puml.css" rel="stylesheet">
        <link href="../assets/mkdocs_puml/interaction.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Digital Identity Service Architecture</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Services</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../scotaccount/" class="dropdown-item">ScotAccount</a>
</li>
                                    
<li>
    <a href="../verifyyouridentity/" class="dropdown-item">VerifyYourIdentity</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">MySafe</a>
</li>
                                    
<li>
    <a href="../sgworkspaces/" class="dropdown-item">SG Workspaces Service</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                            <li class="nav-item">
                                <a rel="prev" href="../verifyyouridentity/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../sgworkspaces/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#mysafe-service" class="nav-link">MySafe Service</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#key-concepts" class="nav-link">Key concepts</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#component-diagram" class="nav-link">Component Diagram</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#high-level-data-flow-diagram" class="nav-link">High level data flow diagram</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mysafe-journey-save" class="nav-link">MySafe journey (Save)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mysafe-journey-reuse" class="nav-link">MySafe journey (Reuse)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mysafe-service-internal-components" class="nav-link">MySafe Service internal components</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="mysafe-service">MySafe Service</h1>
<h2 id="key-concepts">Key concepts</h2>
<ul>
<li>Key concept 1</li>
<li>Key concept 2</li>
</ul>
<h2 id="component-diagram">Component Diagram</h2>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1425px" preserveAspectRatio="xMidYMid meet" style="width:1662px;height:1425px;background:#FFFFFF;" version="1.1" viewBox="0 0 1662 1425" width="1662px" zoomAndPan="magnify" class="diagram"><title>MySafe as-is component diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="263.0127" x="692.4937" y="22.9951">MySafe as-is component diagram</text><g class="cluster" data-entity="AWS_account" data-source-line="3" data-uid="ent0002" id="cluster_AWS_account"><rect fill="#D3D3D3" height="1205.86" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="1649" x="7" y="139.6957"/><rect fill="#D3D3D3" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="1636" y="144.6957"/><rect fill="#D3D3D3" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1634" y="146.6957"/><rect fill="#D3D3D3" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1634" y="150.6957"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105.6494" x="778.6753" y="165.6908">AWS_account</text></g><g class="cluster" data-entity="Internet_VPC" data-source-line="4" data-uid="ent0003" id="cluster_Internet_VPC"><rect fill="#90EE90" height="1130.71" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="448" x="31" y="182.6957"/><rect fill="#90EE90" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="459" y="187.6957"/><rect fill="#90EE90" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="457" y="189.6957"/><rect fill="#90EE90" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="457" y="193.6957"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102.792" x="203.604" y="208.6908">Internet_VPC</text></g><g class="cluster" data-entity="ECS_cluster" data-source-line="7" data-uid="ent0006" id="cluster_ECS_cluster"><rect fill="#ADD8E6" height="116.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="232" x="55" y="701.8857"/><rect fill="#ADD8E6" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="267" y="706.8857"/><rect fill="#ADD8E6" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="265" y="708.8857"/><rect fill="#ADD8E6" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="265" y="712.8857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91.4102" x="125.2949" y="727.8808">ECS_cluster</text></g><g class="cluster" data-entity="Application_VPC" data-source-line="15" data-uid="ent0012" id="cluster_Application_VPC"><rect fill="#90EE90" height="991.56" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="1129" x="503" y="329.9957"/><rect fill="#90EE90" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="1612" y="334.9957"/><rect fill="#90EE90" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1610" y="336.9957"/><rect fill="#90EE90" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1610" y="340.9957"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127.668" x="1003.666" y="355.9908">Application_VPC</text></g><g class="cluster" data-entity="EKS_cluster" data-source-line="23" data-uid="ent0020" id="cluster_EKS_cluster"><rect fill="#ADD8E6" height="702.68" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="754" x="535" y="485.2857"/><rect fill="#ADD8E6" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="1269" y="490.2857"/><rect fill="#ADD8E6" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1267" y="492.2857"/><rect fill="#ADD8E6" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1267" y="496.2857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91.9844" x="866.0078" y="511.2808">EKS_cluster</text></g><g class="cluster" data-entity="VYI_namespace" data-source-line="24" data-uid="ent0021" id="cluster_VYI_namespace"><rect fill="#FFB6C1" height="116.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="138" x="688" y="701.8857"/><rect fill="#FFB6C1" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="806" y="706.8857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="804" y="708.8857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="804" y="712.8857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122.2744" x="695.8628" y="727.8808">VYI_namespace</text></g><g class="cluster" data-entity="ScotAccount_namespace" data-source-line="28" data-uid="ent0023" id="cluster_ScotAccount_namespace"><rect fill="#FFB6C1" height="116.3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="432" x="567" y="1031.5157"/><rect fill="#FFB6C1" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="979" y="1036.5157"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="977" y="1038.5157"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="977" y="1042.5157"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194.4619" x="685.769" y="1057.5108">ScotAccount_namespace</text></g><g class="cluster" data-entity="Issuer_namespace" data-source-line="35" data-uid="ent0027" id="cluster_Issuer_namespace"><rect fill="#FFB6C1" height="288.78" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="182" x="850" y="685.5857"/><rect fill="#FFB6C1" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="1012" y="690.5857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1010" y="692.5857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1010" y="696.5857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144.334" x="868.833" y="711.5808">Issuer_namespace</text></g><g class="cluster" data-entity="MySafe_namespace" data-source-line="39" data-uid="ent0030" id="cluster_MySafe_namespace"><rect fill="#FFB6C1" height="132.6" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="174" x="1075" y="1023.3657"/><rect fill="#FFB6C1" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="1229" y="1028.3657"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1227" y="1030.3657"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="1227" y="1034.3657"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="154.2666" x="1084.8667" y="1049.3608">MySafe_namespace</text></g><g class="cluster" data-entity="nginx_ingress_namespace" data-source-line="42" data-uid="ent0032" id="cluster_nginx_ingress_namespace"><rect fill="#FFB6C1" height="116.3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="220" x="721" y="536.2857"/><rect fill="#FFB6C1" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="921" y="541.2857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="919" y="543.2857"/><rect fill="#FFB6C1" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="919" y="547.2857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="204.7295" x="728.6353" y="562.2808">nginx_ingress_namespace</text></g><g class="entity" data-entity="AWS ALB for App Ingress" data-source-line="5" data-uid="ent0004" id="entity_AWS ALB for App Ingress"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7383" x="220.13" y="236.6957"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="303.8683" y="241.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="301.8683" y="243.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="301.8683" y="247.6957"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.7383" x="235.13" y="269.6908">AWS ALB</text></g><g class="entity" data-entity="AWS NLB for Squid" data-source-line="6" data-uid="ent0005" id="entity_AWS NLB for Squid"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165.6855" x="88.16" y="1251.1057"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="233.8455" y="1256.1057"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="231.8455" y="1258.1057"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="231.8455" y="1262.1057"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.6855" x="103.16" y="1284.1008">AWS NLB ('Basel')</text></g><g class="entity" data-entity="AWS ALB for EKS" data-source-line="11" data-uid="ent0010" id="entity_AWS ALB for EKS"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7383" x="359.13" y="236.6957"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="442.8683" y="241.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="440.8683" y="243.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="440.8683" y="247.6957"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.7383" x="374.13" y="269.6908">AWS ALB</text></g><g class="entity" data-entity="NAT_Gateway" data-source-line="13" data-uid="ent0011" id="entity_NAT_Gateway"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137.4463" x="47.28" y="236.6957"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="164.7263" y="241.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="162.7263" y="243.6957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="162.7263" y="247.6957"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.4463" x="62.28" y="269.6908">NAT_Gateway</text></g><g class="entity" data-entity="Squid_outbound_proxy" data-source-line="8" data-uid="ent0007" id="entity_Squid_outbound_proxy"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.2139" x="70.89" y="755.8857"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="251.1039" y="760.8857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="249.1039" y="762.8857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="249.1039" y="766.8857"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.2139" x="85.89" y="788.8808">Squid_outbound_proxy</text></g><g class="entity" data-entity="EKS API" data-source-line="16" data-uid="ent0013" id="entity_EKS API"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93.5117" x="658.24" y="383.9957"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="731.7517" y="388.9957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="729.7517" y="390.9957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="729.7517" y="394.9957"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.5117" x="673.24" y="416.9908">EKS API</text></g><g class="entity" data-entity="SecretsManager" data-source-line="17" data-uid="ent0014" id="entity_SecretsManager"><path d="M1313.14,1087.8657 C1313.14,1077.8657 1379.9979,1077.8657 1379.9979,1077.8657 C1379.9979,1077.8657 1446.8558,1077.8657 1446.8558,1087.8657 L1446.8558,1129.4594 C1446.8558,1139.4594 1379.9979,1139.4594 1379.9979,1139.4594 C1379.9979,1139.4594 1313.14,1139.4594 1313.14,1129.4594 L1313.14,1087.8657" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1313.14,1087.8657 C1313.14,1097.8657 1379.9979,1097.8657 1379.9979,1097.8657 C1379.9979,1097.8657 1446.8558,1097.8657 1446.8558,1087.8657" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1324.2713" y="1114.8608">«VPC endpoint»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.7158" x="1323.14" y="1131.1577">SecretsManager</text></g><g class="entity" data-entity="CloudWatch" data-source-line="18" data-uid="ent0015" id="entity_CloudWatch"><path d="M1313.27,758.2357 C1313.27,748.2357 1379.9966,748.2357 1379.9966,748.2357 C1379.9966,748.2357 1446.7231,748.2357 1446.7231,758.2357 L1446.7231,799.8294 C1446.7231,809.8294 1379.9966,809.8294 1379.9966,809.8294 C1379.9966,809.8294 1313.27,809.8294 1313.27,799.8294 L1313.27,758.2357" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1313.27,758.2357 C1313.27,768.2357 1379.9966,768.2357 1379.9966,768.2357 C1379.9966,768.2357 1446.7231,768.2357 1446.7231,758.2357" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1324.27" y="785.2308">«VPC endpoint»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.4717" x="1337.7607" y="801.5277">CloudWatch</text></g><g class="entity" data-entity="AWS NLB for App Ingress" data-source-line="19" data-uid="ent0016" id="entity_AWS NLB for App Ingress"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.6338" x="518.68" y="383.9957"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="603.3138" y="388.9957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="601.3138" y="390.9957"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="601.3138" y="394.9957"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.6338" x="533.68" y="416.9908">AWS NLB</text></g><g class="entity" data-entity="DynamoDB" data-source-line="20" data-uid="ent0017" id="entity_DynamoDB"><path d="M1482.27,1087.8657 C1482.27,1077.8657 1548.9966,1077.8657 1548.9966,1077.8657 C1548.9966,1077.8657 1615.7231,1077.8657 1615.7231,1087.8657 L1615.7231,1129.4594 C1615.7231,1139.4594 1548.9966,1139.4594 1548.9966,1139.4594 C1548.9966,1139.4594 1482.27,1139.4594 1482.27,1129.4594 L1482.27,1087.8657" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1482.27,1087.8657 C1482.27,1097.8657 1548.9966,1097.8657 1548.9966,1097.8657 C1548.9966,1097.8657 1615.7231,1097.8657 1615.7231,1087.8657" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1493.27" y="1114.8608">«VPC endpoint»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.1055" x="1509.4438" y="1131.1577">DynamoDB</text></g><g class="entity" data-entity="S3" data-source-line="21" data-uid="ent0018" id="entity_S3"><path d="M1226.27,1253.4657 C1226.27,1243.4657 1292.9966,1243.4657 1292.9966,1243.4657 C1292.9966,1243.4657 1359.7231,1243.4657 1359.7231,1253.4657 L1359.7231,1295.0594 C1359.7231,1305.0594 1292.9966,1305.0594 1292.9966,1305.0594 C1292.9966,1305.0594 1226.27,1305.0594 1226.27,1295.0594 L1226.27,1253.4657" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1226.27,1253.4657 C1226.27,1263.4657 1292.9966,1263.4657 1292.9966,1263.4657 C1292.9966,1263.4657 1359.7231,1263.4657 1359.7231,1253.4657" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1237.27" y="1280.4608">«VPC endpoint»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.7939" x="1284.0996" y="1296.7577">S3</text></g><g class="entity" data-entity="KMS" data-source-line="22" data-uid="ent0019" id="entity_KMS"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.4531" x="1038.27" y="1242.9657"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1171.7231" y="1247.9657"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1169.7231" y="1249.9657"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1169.7231" y="1253.9657"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1054.27" y="1275.9608">«VPC endpoint»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.1465" x="1094.9233" y="1292.2577">KMS</text></g><g class="entity" data-entity="VYI_services" data-source-line="25" data-uid="ent0022" id="entity_VYI_services"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.3506" x="756.32" y="755.8857"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="789.6706" y="760.8857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="787.6706" y="762.8857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="787.6706" y="766.8857"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.3506" x="771.32" y="788.8808">...</text></g><g class="entity" data-entity="Connect2id" data-source-line="33" data-uid="ent0026" id="entity_Connect2id"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.5703" x="775.21" y="1085.5157"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="874.7803" y="1090.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="872.7803" y="1092.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="872.7803" y="1096.5157"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.5703" x="790.21" y="1118.5108">Connect2id</text></g><g class="entity" data-entity="ScotAccount_services" data-source-line="29" data-uid="ent0024" id="entity_ScotAccount_services"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157.3936" x="583.3" y="1085.5157"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="720.6936" y="1090.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718.6936" y="1092.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718.6936" y="1096.5157"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.3936" x="598.3" y="1118.5108">Authz (Mediator)</text></g><g class="entity" data-entity="ScotAccount_services_other" data-source-line="31" data-uid="ent0025" id="entity_ScotAccount_services_other"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.3506" x="929.32" y="1085.5157"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="962.6706" y="1090.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="960.6706" y="1092.5157"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="960.6706" y="1096.5157"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.3506" x="944.32" y="1118.5108">...</text></g><g class="entity" data-entity="Issuer_Service" data-source-line="36" data-uid="ent0028" id="entity_Issuer_Service"><rect fill="#F1F1F1" height="78.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.1133" x="865.94" y="879.4757"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="996.0533" y="884.4757"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="994.0533" y="886.4757"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="994.0533" y="890.4757"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.5342" x="888.7296" y="912.4708">«SpringBoot»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.7002" x="880.94" y="928.7677">Issuer_Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="110.1133" x="880.94" y="945.0646">MySafe_Service</text></g><g class="entity" data-entity="Issuer_UI" data-source-line="37" data-uid="ent0029" id="entity_Issuer_UI"><rect fill="#F1F1F1" height="78.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.748" x="874.63" y="739.5857"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="967.378" y="744.5857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="965.378" y="746.5857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="965.378" y="750.5857"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.7031" x="892.1525" y="772.5808">«node.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.335" x="889.63" y="788.8777">Issuer_UI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="72.748" x="889.63" y="805.1746">MySafe_UI</text></g><g class="entity" data-entity="Locker_Service" data-source-line="40" data-uid="ent0031" id="entity_Locker_Service"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.7393" x="1091.13" y="1077.3657"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1212.8693" y="1082.3657"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1210.8693" y="1084.3657"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1210.8693" y="1088.3657"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.5342" x="1109.7325" y="1110.3608">«SpringBoot»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.7393" x="1106.13" y="1126.6577">Locker-service</text></g><g class="entity" data-entity="nginx" data-source-line="43" data-uid="ent0033" id="entity_nginx"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78.8076" x="791.6" y="590.2857"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="850.4076" y="595.2857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="848.4076" y="597.2857"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="848.4076" y="601.2857"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.8076" x="806.6" y="623.2808">nginx</text></g><g class="entity" data-entity="Internet" data-source-line="48" data-uid="ent0034" id="entity_Internet"><path d="M161.8518,55.2763 C164.9475,50.2423 168.8761,49.9771 172.6835,54.4669 C175.7915,48.295 180.1358,48.3957 184.3775,53.2664 C187.2935,47.9438 191.5613,47.4664 195.1413,52.5817 C198.8898,47.6573 202.7467,46.5566 206.734,52.3227 C211.7772,47.0594 216.0082,47.2081 218.8507,54.4543 C222.9083,49.2868 227.5661,49.5613 231.2525,54.8928 C238.5904,57.7323 240.3277,65.0883 234.0129,70.3638 C239.8175,76.7654 239.663,81.849 231.667,86.2073 C229.7128,92.3678 224.179,92.7759 220.4302,88.0615 C217.4904,96.3348 213.0231,97.3768 206.8992,91.0031 C205.9668,96.7193 201.2734,98.9022 196.3854,95.6298 C191.7873,99.828 186.5043,99.2881 184.5421,92.728 C178.0223,97.5635 174.7972,94.9294 172.5899,88.2512 C168.3816,92.7068 163.3143,92.2384 160.6427,86.4577 C150.9847,85.485 147.7638,78.2616 154.3599,70.7765 C148.2429,61.7942 151.3357,56.2192 161.8518,55.2763" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.8359" x="167.08" y="74.3908">Internet</text></g><g class="entity" data-entity="VPN" data-source-line="49" data-uid="ent0035" id="entity_VPN"><path d="M391.7428,55.0192 C396.9895,44.4248 405.237,45.2665 411.9769,53.4065 C419.6916,43.2969 426.0559,43.9364 432.5497,54.6148 C443.3596,54.8432 446.4911,60.121 442.0318,69.8517 C446.0648,78.7634 443.8588,85.3384 432.754,84.9448 C428.0631,95.9471 419.4722,98.8628 411.1539,88.6354 C403.8795,98.1495 395.2241,95.6561 391.7034,85.0132 C382.3736,83.4447 380.9209,78.5859 384.2234,70.5046 C380.2593,62.1185 381.297,56.4082 391.7428,55.0192" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.4922" x="396.75" y="74.3908">VPN</text></g><g class="link" data-entity-1="Squid_outbound_proxy" data-entity-2="AWS NLB for Squid" data-source-line="10" data-uid="lnk9" id="link_Squid_outbound_proxy_AWS NLB for Squid"><path d="M171,808.5057 C171,890.6757 171,1168.2657 171,1250.6557" fill="none" id="Squid_outbound_proxy-backto-AWS NLB for Squid" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="171,802.5057,167,811.5057,171,807.5057,175,811.5057,171,802.5057" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Internet" data-entity-2="AWS ALB for App Ingress" data-source-line="51" data-uid="lnk36" id="link_Internet_AWS ALB for App Ingress"><path d="M204.14,92.8857 C218.91,129.0257 245.6387,194.3822 260.4887,230.6922" fill="none" id="Internet-to-AWS ALB for App Ingress" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="262.76,236.2457,263.0554,226.4013,260.8673,231.6178,255.6508,229.4296,262.76,236.2457" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="VPN" data-entity-2="AWS ALB for EKS" data-source-line="52" data-uid="lnk37" id="link_VPN_AWS ALB for EKS"><path d="M411,92.8857 C411,129.0257 411,193.9357 411,230.2457" fill="none" id="VPN-to-AWS ALB for EKS" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="411,236.2457,415,227.2457,411,231.2457,407,227.2457,411,236.2457" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="AWS ALB for EKS" data-entity-2="EKS API" data-source-line="53" data-uid="lnk38" id="link_AWS ALB for EKS_EKS API"><path d="M462.94,264.9557 C512.34,270.9757 586.93,285.7757 641,321.9957 C664.33,337.6257 679.6555,359.4149 690.6155,378.6149" fill="none" id="AWS ALB for EKS-to-EKS API" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="693.59,383.8257,692.6021,374.0265,691.1113,379.4834,685.6544,377.9925,693.59,383.8257" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="AWS ALB for App Ingress" data-entity-2="AWS NLB for App Ingress" data-source-line="55" data-uid="lnk39" id="link_AWS ALB for App Ingress_AWS NLB for App Ingress"><path d="M324.32,277.5757 C330.27,279.4357 336.26,281.2657 342,282.9957 C402.63,301.2157 423.72,291.1357 479,321.9957 C507.73,338.0257 530.7518,360.239 547.9818,379.259" fill="none" id="AWS ALB for App Ingress-to-AWS NLB for App Ingress" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="552.01,383.7057,548.9321,374.3501,548.6531,380.0001,543.0032,379.7211,552.01,383.7057" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="AWS NLB for App Ingress" data-entity-2="nginx" data-source-line="56" data-uid="lnk40" id="link_AWS NLB for App Ingress_nginx"><path d="M599.82,430.7857 C649.93,470.1557 747.8124,547.0683 797.7324,586.2983" fill="none" id="AWS NLB for App Ingress-to-nginx" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="802.45,590.0057,797.8452,581.2996,798.5187,586.9162,792.9021,587.5897,802.45,590.0057" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="NAT_Gateway" data-entity-2="Squid_outbound_proxy" data-source-line="57" data-uid="lnk42" id="link_NAT_Gateway_Squid_outbound_proxy"><path d="M119.034,289.3621 C128.094,374.6221 159.58,670.6857 168.62,755.6457" fill="none" id="NAT_Gateway-backto-Squid_outbound_proxy" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="118.4,283.3957,115.3734,292.768,118.9283,288.3677,123.3286,291.9226,118.4,283.3957" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="NAT_Gateway" data-entity-2="Internet" data-source-line="58" data-uid="lnk43" id="link_NAT_Gateway_Internet"><path d="M125.48,236.2457 C140.72,199.9357 168.1378,134.5581 183.3078,98.4181" fill="none" id="NAT_Gateway-to-Internet" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="185.63,92.8857,178.4584,99.6361,183.6948,97.496,185.8349,102.7324,185.63,92.8857" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="nginx" data-entity-2="Issuer_UI" data-source-line="59" data-uid="lnk44" id="link_nginx_Issuer_UI"><path d="M844.69,636.8457 C860.8,663.1857 884.6605,702.2265 904.1805,734.1565" fill="none" id="nginx-to-Issuer_UI" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="907.31,739.2757,906.0285,729.5106,904.702,735.0097,899.2029,733.6833,907.31,739.2757" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_UI" data-entity-2="Issuer_Service" data-source-line="61" data-uid="lnk45" id="link_Issuer_UI_Issuer_Service"><path d="M933.81,818.8057 C935.19,837.7657 936.4067,854.5314 937.7767,873.4514" fill="none" id="Issuer_UI-to-Issuer_Service" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="938.21,879.4357,941.5496,870.1703,937.8489,874.4487,933.5705,870.7481,938.21,879.4357" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="VYI_services" data-entity-2="Issuer_Service" data-source-line="63" data-uid="lnk46" id="link_VYI_services_Issuer_Service"><path d="M813.2601,806.4414 C836.9501,827.1214 863.5791,850.3609 891.9091,875.0809" fill="none" id="VYI_services-Issuer_Service" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="808.74,802.4957,812.8896,811.4277,812.5067,805.7838,818.1506,805.401,808.74,802.4957" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="896.43,879.0257,892.2785,870.0945,892.6626,875.7384,887.0188,876.1224,896.43,879.0257" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ScotAccount_services" data-entity-2="Issuer_Service" data-source-line="64" data-uid="lnk47" id="link_ScotAccount_services_Issuer_Service"><path d="M676.5478,1079.8929 C691.1178,1053.7129 715.5,1016.0657 750,990.3657 C784.15,964.9257 822.7132,949.5165 860.0632,938.5465" fill="none" id="ScotAccount_services-Issuer_Service" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="673.63,1085.1357,681.5018,1079.2167,676.0615,1080.7667,674.5115,1075.3264,673.63,1085.1357" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="865.82,936.8557,856.0575,935.554,861.0226,938.2647,858.312,943.2298,865.82,936.8557" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="DynamoDB" data-source-line="66" data-uid="lnk48" id="link_Issuer_Service_DynamoDB"><path d="M1016.52,927.7457 C1142.23,941.7357 1388.11,973.5657 1464,1015.3657 C1490.9,1030.1857 1510.4089,1051.8494 1525.6889,1072.6594" fill="none" id="Issuer_Service-to-DynamoDB" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1529.24,1077.4957,1527.1375,1067.8739,1526.2807,1073.4655,1520.6892,1072.6087,1529.24,1077.4957" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="SecretsManager" data-source-line="67" data-uid="lnk49" id="link_Issuer_Service_SecretsManager"><path d="M1016.29,936.2457 C1080.24,951.7257 1173.4,978.1857 1249,1015.3657 C1283.33,1032.2557 1313.8535,1053.917 1339.1235,1073.787" fill="none" id="Issuer_Service-to-SecretsManager" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1343.84,1077.4957,1339.2376,1068.7883,1339.9095,1074.4051,1334.2927,1075.0771,1343.84,1077.4957" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="Connect2id" data-source-line="68" data-uid="lnk50" id="link_Issuer_Service_Connect2id"><path d="M865.55,929.1557 C827.16,938.1057 783.7,955.7157 760,990.3657 C748.06,1007.8257 783.4628,1051.778 809.6128,1080.658" fill="none" id="Issuer_Service-to-Connect2id" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="813.64,1085.1057,810.5643,1075.7494,810.284,1081.3993,804.6341,1081.119,813.64,1085.1057" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.6465" x="761" y="1003.4326">OAuth2 Token Exchnage</text></g><g class="link" data-entity-1="Locker_Service" data-entity-2="S3" data-source-line="70" data-uid="lnk51" id="link_Locker_Service_S3"><path d="M1186.26,1140.2857 C1200.92,1158.7557 1219.99,1182.7457 1237,1203.9657 C1247.35,1216.8757 1255.0567,1226.4307 1264.9167,1238.6207" fill="none" id="Locker_Service-to-S3" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1268.69,1243.2857,1266.14,1233.7727,1265.5456,1239.3982,1259.92,1238.8038,1268.69,1243.2857" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Locker_Service" data-entity-2="Connect2id" data-source-line="71" data-uid="lnk52" id="link_Locker_Service_Connect2id"><path d="M1139.67,1077.0857 C1120.67,1053.1557 1091,1022.1257 1056.5,1008.3357 C1022.93,994.9157 956.33,982.9457 912,1015.3657 C885.9,1034.4657 866.6543,1059.3508 852.8243,1080.1308" fill="none" id="Locker_Service-to-Connect2id" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="849.5,1085.1257,857.8164,1079.8496,852.2703,1080.9633,851.1566,1075.4171,849.5,1085.1257" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.8042" x="930.5" y="1003.4326">verify access token</text></g><g class="link" data-entity-1="Locker_Service" data-entity-2="KMS" data-source-line="72" data-uid="lnk53" id="link_Locker_Service_KMS"><path d="M1153.16,1140.4357 C1144.76,1169.6857 1133.8469,1207.659 1125.4569,1236.859" fill="none" id="Locker_Service-to-KMS" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1123.8,1242.6257,1130.1299,1235.0803,1125.1808,1237.8201,1122.4409,1232.8711,1123.8,1242.6257" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="Locker_Service" data-source-line="74" data-uid="lnk54" id="link_Issuer_Service_Locker_Service"><path d="M1016.35,956.9157 C1033.14,966.7057 1050.3,978.0357 1065,990.3657 C1095.36,1015.8457 1119.9699,1046.8581 1138.0199,1072.2081" fill="none" id="Issuer_Service-to-Locker_Service" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1141.5,1077.0957,1139.5382,1067.4442,1138.5999,1073.0227,1133.0214,1072.0844,1141.5,1077.0957" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="EKS_cluster" data-entity-2="CloudWatch" data-source-line="75" data-uid="lnk55" id="link_EKS_cluster_CloudWatch"><path d="M1289.1892,627.9693 C1289.3493,628.2339 1289.5115,628.5018 1289.6756,628.7729 C1290.0037,629.3152 1290.3397,629.8703 1290.6831,630.4377 C1296.1781,639.5173 1303.5925,651.7688 1311.8125,665.3519 C1328.2525,692.5182 1344.8088,719.8773 1358.7838,742.9723" fill="none" id="EKS_cluster-to-CloudWatch" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1361.89,748.1057,1360.6529,738.3348,1359.3015,743.8279,1353.8084,742.4765,1361.89,748.1057" style="stroke:#181818;stroke-width:1;"/></g><rect fill="#DDDDDD" height="42.5938" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="383.3105" x="1252.6895" y="1362.5557"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="362.7148" x="1257.6895" y="1380.5508">Dotted arrows represent direction of dependencies.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="373.3105" x="1257.6895" y="1396.8477">HTTP-redirecting-to is not depicted by dotted arrows.</text></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1425px" preserveAspectRatio="xMidYMid meet" style="width:1662px;height:1425px;background:#1B1B1B;" version="1.1" viewBox="0 0 1662 1425" width="1662px" zoomAndPan="magnify" class="diagram"><title>MySafe as-is component diagram</title><defs/><g><rect fill="#1B1B1B" height="1425" style="stroke:none;stroke-width:1;" width="1662" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="263.0127" x="692.4937" y="22.9951">MySafe as-is component diagram</text><g class="cluster" data-entity="AWS_account" data-source-line="3" data-uid="ent0002" id="cluster_AWS_account"><rect fill="#D3D3D3" height="1205.86" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="1649" x="7" y="139.6957"/><rect fill="#D3D3D3" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="1636" y="144.6957"/><rect fill="#D3D3D3" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1634" y="146.6957"/><rect fill="#D3D3D3" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1634" y="150.6957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105.6494" x="778.6753" y="165.6908">AWS_account</text></g><g class="cluster" data-entity="Internet_VPC" data-source-line="4" data-uid="ent0003" id="cluster_Internet_VPC"><rect fill="#90EE90" height="1130.71" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="448" x="31" y="182.6957"/><rect fill="#90EE90" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="459" y="187.6957"/><rect fill="#90EE90" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="457" y="189.6957"/><rect fill="#90EE90" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="457" y="193.6957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102.792" x="203.604" y="208.6908">Internet_VPC</text></g><g class="cluster" data-entity="ECS_cluster" data-source-line="7" data-uid="ent0006" id="cluster_ECS_cluster"><rect fill="#ADD8E6" height="116.29" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="232" x="55" y="701.8857"/><rect fill="#ADD8E6" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="267" y="706.8857"/><rect fill="#ADD8E6" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="265" y="708.8857"/><rect fill="#ADD8E6" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="265" y="712.8857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91.4102" x="125.2949" y="727.8808">ECS_cluster</text></g><g class="cluster" data-entity="Application_VPC" data-source-line="15" data-uid="ent0012" id="cluster_Application_VPC"><rect fill="#90EE90" height="991.56" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="1129" x="503" y="329.9957"/><rect fill="#90EE90" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="1612" y="334.9957"/><rect fill="#90EE90" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1610" y="336.9957"/><rect fill="#90EE90" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1610" y="340.9957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127.668" x="1003.666" y="355.9908">Application_VPC</text></g><g class="cluster" data-entity="EKS_cluster" data-source-line="23" data-uid="ent0020" id="cluster_EKS_cluster"><rect fill="#ADD8E6" height="702.68" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="754" x="535" y="485.2857"/><rect fill="#ADD8E6" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="1269" y="490.2857"/><rect fill="#ADD8E6" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1267" y="492.2857"/><rect fill="#ADD8E6" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1267" y="496.2857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91.9844" x="866.0078" y="511.2808">EKS_cluster</text></g><g class="cluster" data-entity="VYI_namespace" data-source-line="24" data-uid="ent0021" id="cluster_VYI_namespace"><rect fill="#FFB6C1" height="116.29" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="138" x="688" y="701.8857"/><rect fill="#FFB6C1" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="806" y="706.8857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="804" y="708.8857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="804" y="712.8857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122.2744" x="695.8628" y="727.8808">VYI_namespace</text></g><g class="cluster" data-entity="ScotAccount_namespace" data-source-line="28" data-uid="ent0023" id="cluster_ScotAccount_namespace"><rect fill="#FFB6C1" height="116.3" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="432" x="567" y="1031.5157"/><rect fill="#FFB6C1" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="979" y="1036.5157"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="977" y="1038.5157"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="977" y="1042.5157"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194.4619" x="685.769" y="1057.5108">ScotAccount_namespace</text></g><g class="cluster" data-entity="Issuer_namespace" data-source-line="35" data-uid="ent0027" id="cluster_Issuer_namespace"><rect fill="#FFB6C1" height="288.78" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="182" x="850" y="685.5857"/><rect fill="#FFB6C1" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="1012" y="690.5857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1010" y="692.5857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1010" y="696.5857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144.334" x="868.833" y="711.5808">Issuer_namespace</text></g><g class="cluster" data-entity="MySafe_namespace" data-source-line="39" data-uid="ent0030" id="cluster_MySafe_namespace"><rect fill="#FFB6C1" height="132.6" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="174" x="1075" y="1023.3657"/><rect fill="#FFB6C1" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="1229" y="1028.3657"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1227" y="1030.3657"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="1227" y="1034.3657"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="154.2666" x="1084.8667" y="1049.3608">MySafe_namespace</text></g><g class="cluster" data-entity="nginx_ingress_namespace" data-source-line="42" data-uid="ent0032" id="cluster_nginx_ingress_namespace"><rect fill="#FFB6C1" height="116.3" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="220" x="721" y="536.2857"/><rect fill="#FFB6C1" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="921" y="541.2857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="919" y="543.2857"/><rect fill="#FFB6C1" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="919" y="547.2857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="204.7295" x="728.6353" y="562.2808">nginx_ingress_namespace</text></g><g class="entity" data-entity="AWS ALB for App Ingress" data-source-line="5" data-uid="ent0004" id="entity_AWS ALB for App Ingress"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.7383" x="220.13" y="236.6957"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="303.8683" y="241.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="301.8683" y="243.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="301.8683" y="247.6957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.7383" x="235.13" y="269.6908">AWS ALB</text></g><g class="entity" data-entity="AWS NLB for Squid" data-source-line="6" data-uid="ent0005" id="entity_AWS NLB for Squid"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="165.6855" x="88.16" y="1251.1057"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="233.8455" y="1256.1057"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="231.8455" y="1258.1057"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="231.8455" y="1262.1057"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.6855" x="103.16" y="1284.1008">AWS NLB ('Basel')</text></g><g class="entity" data-entity="AWS ALB for EKS" data-source-line="11" data-uid="ent0010" id="entity_AWS ALB for EKS"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.7383" x="359.13" y="236.6957"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="442.8683" y="241.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="440.8683" y="243.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="440.8683" y="247.6957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.7383" x="374.13" y="269.6908">AWS ALB</text></g><g class="entity" data-entity="NAT_Gateway" data-source-line="13" data-uid="ent0011" id="entity_NAT_Gateway"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="137.4463" x="47.28" y="236.6957"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="164.7263" y="241.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="162.7263" y="243.6957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="162.7263" y="247.6957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.4463" x="62.28" y="269.6908">NAT_Gateway</text></g><g class="entity" data-entity="Squid_outbound_proxy" data-source-line="8" data-uid="ent0007" id="entity_Squid_outbound_proxy"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="200.2139" x="70.89" y="755.8857"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="251.1039" y="760.8857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="249.1039" y="762.8857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="249.1039" y="766.8857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.2139" x="85.89" y="788.8808">Squid_outbound_proxy</text></g><g class="entity" data-entity="EKS API" data-source-line="16" data-uid="ent0013" id="entity_EKS API"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="93.5117" x="658.24" y="383.9957"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="731.7517" y="388.9957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="729.7517" y="390.9957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="729.7517" y="394.9957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.5117" x="673.24" y="416.9908">EKS API</text></g><g class="entity" data-entity="SecretsManager" data-source-line="17" data-uid="ent0014" id="entity_SecretsManager"><path d="M1313.14,1087.8657 C1313.14,1077.8657 1379.9979,1077.8657 1379.9979,1077.8657 C1379.9979,1077.8657 1446.8558,1077.8657 1446.8558,1087.8657 L1446.8558,1129.4594 C1446.8558,1139.4594 1379.9979,1139.4594 1379.9979,1139.4594 C1379.9979,1139.4594 1313.14,1139.4594 1313.14,1129.4594 L1313.14,1087.8657" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1313.14,1087.8657 C1313.14,1097.8657 1379.9979,1097.8657 1379.9979,1097.8657 C1379.9979,1097.8657 1446.8558,1097.8657 1446.8558,1087.8657" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1324.2713" y="1114.8608">«VPC endpoint»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.7158" x="1323.14" y="1131.1577">SecretsManager</text></g><g class="entity" data-entity="CloudWatch" data-source-line="18" data-uid="ent0015" id="entity_CloudWatch"><path d="M1313.27,758.2357 C1313.27,748.2357 1379.9966,748.2357 1379.9966,748.2357 C1379.9966,748.2357 1446.7231,748.2357 1446.7231,758.2357 L1446.7231,799.8294 C1446.7231,809.8294 1379.9966,809.8294 1379.9966,809.8294 C1379.9966,809.8294 1313.27,809.8294 1313.27,799.8294 L1313.27,758.2357" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1313.27,758.2357 C1313.27,768.2357 1379.9966,768.2357 1379.9966,768.2357 C1379.9966,768.2357 1446.7231,768.2357 1446.7231,758.2357" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1324.27" y="785.2308">«VPC endpoint»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.4717" x="1337.7607" y="801.5277">CloudWatch</text></g><g class="entity" data-entity="AWS NLB for App Ingress" data-source-line="19" data-uid="ent0016" id="entity_AWS NLB for App Ingress"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="104.6338" x="518.68" y="383.9957"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="603.3138" y="388.9957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="601.3138" y="390.9957"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="601.3138" y="394.9957"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.6338" x="533.68" y="416.9908">AWS NLB</text></g><g class="entity" data-entity="DynamoDB" data-source-line="20" data-uid="ent0017" id="entity_DynamoDB"><path d="M1482.27,1087.8657 C1482.27,1077.8657 1548.9966,1077.8657 1548.9966,1077.8657 C1548.9966,1077.8657 1615.7231,1077.8657 1615.7231,1087.8657 L1615.7231,1129.4594 C1615.7231,1139.4594 1548.9966,1139.4594 1548.9966,1139.4594 C1548.9966,1139.4594 1482.27,1139.4594 1482.27,1129.4594 L1482.27,1087.8657" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1482.27,1087.8657 C1482.27,1097.8657 1548.9966,1097.8657 1548.9966,1097.8657 C1548.9966,1097.8657 1615.7231,1097.8657 1615.7231,1087.8657" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1493.27" y="1114.8608">«VPC endpoint»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.1055" x="1509.4438" y="1131.1577">DynamoDB</text></g><g class="entity" data-entity="S3" data-source-line="21" data-uid="ent0018" id="entity_S3"><path d="M1226.27,1253.4657 C1226.27,1243.4657 1292.9966,1243.4657 1292.9966,1243.4657 C1292.9966,1243.4657 1359.7231,1243.4657 1359.7231,1253.4657 L1359.7231,1295.0594 C1359.7231,1305.0594 1292.9966,1305.0594 1292.9966,1305.0594 C1292.9966,1305.0594 1226.27,1305.0594 1226.27,1295.0594 L1226.27,1253.4657" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1226.27,1253.4657 C1226.27,1263.4657 1292.9966,1263.4657 1292.9966,1263.4657 C1292.9966,1263.4657 1359.7231,1263.4657 1359.7231,1253.4657" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1237.27" y="1280.4608">«VPC endpoint»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.7939" x="1284.0996" y="1296.7577">S3</text></g><g class="entity" data-entity="KMS" data-source-line="22" data-uid="ent0019" id="entity_KMS"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="153.4531" x="1038.27" y="1242.9657"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="1171.7231" y="1247.9657"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="1169.7231" y="1249.9657"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="1169.7231" y="1253.9657"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="111.4531" x="1054.27" y="1275.9608">«VPC endpoint»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.1465" x="1094.9233" y="1292.2577">KMS</text></g><g class="entity" data-entity="VYI_services" data-source-line="25" data-uid="ent0022" id="entity_VYI_services"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="53.3506" x="756.32" y="755.8857"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="789.6706" y="760.8857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="787.6706" y="762.8857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="787.6706" y="766.8857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.3506" x="771.32" y="788.8808">...</text></g><g class="entity" data-entity="Connect2id" data-source-line="33" data-uid="ent0026" id="entity_Connect2id"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="119.5703" x="775.21" y="1085.5157"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="874.7803" y="1090.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="872.7803" y="1092.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="872.7803" y="1096.5157"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.5703" x="790.21" y="1118.5108">Connect2id</text></g><g class="entity" data-entity="ScotAccount_services" data-source-line="29" data-uid="ent0024" id="entity_ScotAccount_services"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="157.3936" x="583.3" y="1085.5157"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="720.6936" y="1090.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="718.6936" y="1092.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="718.6936" y="1096.5157"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.3936" x="598.3" y="1118.5108">Authz (Mediator)</text></g><g class="entity" data-entity="ScotAccount_services_other" data-source-line="31" data-uid="ent0025" id="entity_ScotAccount_services_other"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="53.3506" x="929.32" y="1085.5157"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="962.6706" y="1090.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="960.6706" y="1092.5157"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="960.6706" y="1096.5157"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.3506" x="944.32" y="1118.5108">...</text></g><g class="entity" data-entity="Issuer_Service" data-source-line="36" data-uid="ent0028" id="entity_Issuer_Service"><rect fill="#313139" height="78.8906" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="150.1133" x="865.94" y="879.4757"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="996.0533" y="884.4757"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="994.0533" y="886.4757"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="994.0533" y="890.4757"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.5342" x="888.7296" y="912.4708">«SpringBoot»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.7002" x="880.94" y="928.7677">Issuer_Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="110.1133" x="880.94" y="945.0646">MySafe_Service</text></g><g class="entity" data-entity="Issuer_UI" data-source-line="37" data-uid="ent0029" id="entity_Issuer_UI"><rect fill="#313139" height="78.8906" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="112.748" x="874.63" y="739.5857"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="967.378" y="744.5857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="965.378" y="746.5857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="965.378" y="750.5857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.7031" x="892.1525" y="772.5808">«node.js»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.335" x="889.63" y="788.8777">Issuer_UI</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="72.748" x="889.63" y="805.1746">MySafe_UI</text></g><g class="entity" data-entity="Locker_Service" data-source-line="40" data-uid="ent0031" id="entity_Locker_Service"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="141.7393" x="1091.13" y="1077.3657"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="1212.8693" y="1082.3657"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="1210.8693" y="1084.3657"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="1210.8693" y="1088.3657"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.5342" x="1109.7325" y="1110.3608">«SpringBoot»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.7393" x="1106.13" y="1126.6577">Locker-service</text></g><g class="entity" data-entity="nginx" data-source-line="43" data-uid="ent0033" id="entity_nginx"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="78.8076" x="791.6" y="590.2857"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="850.4076" y="595.2857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="848.4076" y="597.2857"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="848.4076" y="601.2857"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.8076" x="806.6" y="623.2808">nginx</text></g><g class="entity" data-entity="Internet" data-source-line="48" data-uid="ent0034" id="entity_Internet"><path d="M161.8518,55.2763 C164.9475,50.2423 168.8761,49.9771 172.6835,54.4669 C175.7915,48.295 180.1358,48.3957 184.3775,53.2664 C187.2935,47.9438 191.5613,47.4664 195.1413,52.5817 C198.8898,47.6573 202.7467,46.5566 206.734,52.3227 C211.7772,47.0594 216.0082,47.2081 218.8507,54.4543 C222.9083,49.2868 227.5661,49.5613 231.2525,54.8928 C238.5904,57.7323 240.3277,65.0883 234.0129,70.3638 C239.8175,76.7654 239.663,81.849 231.667,86.2073 C229.7128,92.3678 224.179,92.7759 220.4302,88.0615 C217.4904,96.3348 213.0231,97.3768 206.8992,91.0031 C205.9668,96.7193 201.2734,98.9022 196.3854,95.6298 C191.7873,99.828 186.5043,99.2881 184.5421,92.728 C178.0223,97.5635 174.7972,94.9294 172.5899,88.2512 C168.3816,92.7068 163.3143,92.2384 160.6427,86.4577 C150.9847,85.485 147.7638,78.2616 154.3599,70.7765 C148.2429,61.7942 151.3357,56.2192 161.8518,55.2763" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.8359" x="167.08" y="74.3908">Internet</text></g><g class="entity" data-entity="VPN" data-source-line="49" data-uid="ent0035" id="entity_VPN"><path d="M391.7428,55.0192 C396.9895,44.4248 405.237,45.2665 411.9769,53.4065 C419.6916,43.2969 426.0559,43.9364 432.5497,54.6148 C443.3596,54.8432 446.4911,60.121 442.0318,69.8517 C446.0648,78.7634 443.8588,85.3384 432.754,84.9448 C428.0631,95.9471 419.4722,98.8628 411.1539,88.6354 C403.8795,98.1495 395.2241,95.6561 391.7034,85.0132 C382.3736,83.4447 380.9209,78.5859 384.2234,70.5046 C380.2593,62.1185 381.297,56.4082 391.7428,55.0192" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.4922" x="396.75" y="74.3908">VPN</text></g><g class="link" data-entity-1="Squid_outbound_proxy" data-entity-2="AWS NLB for Squid" data-source-line="10" data-uid="lnk9" id="link_Squid_outbound_proxy_AWS NLB for Squid"><path d="M171,808.5057 C171,890.6757 171,1168.2657 171,1250.6557" fill="none" id="Squid_outbound_proxy-backto-AWS NLB for Squid" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="171,802.5057,167,811.5057,171,807.5057,175,811.5057,171,802.5057" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Internet" data-entity-2="AWS ALB for App Ingress" data-source-line="51" data-uid="lnk36" id="link_Internet_AWS ALB for App Ingress"><path d="M204.14,92.8857 C218.91,129.0257 245.6387,194.3822 260.4887,230.6922" fill="none" id="Internet-to-AWS ALB for App Ingress" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="262.76,236.2457,263.0554,226.4013,260.8673,231.6178,255.6508,229.4296,262.76,236.2457" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="VPN" data-entity-2="AWS ALB for EKS" data-source-line="52" data-uid="lnk37" id="link_VPN_AWS ALB for EKS"><path d="M411,92.8857 C411,129.0257 411,193.9357 411,230.2457" fill="none" id="VPN-to-AWS ALB for EKS" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="411,236.2457,415,227.2457,411,231.2457,407,227.2457,411,236.2457" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="AWS ALB for EKS" data-entity-2="EKS API" data-source-line="53" data-uid="lnk38" id="link_AWS ALB for EKS_EKS API"><path d="M462.94,264.9557 C512.34,270.9757 586.93,285.7757 641,321.9957 C664.33,337.6257 679.6555,359.4149 690.6155,378.6149" fill="none" id="AWS ALB for EKS-to-EKS API" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="693.59,383.8257,692.6021,374.0265,691.1113,379.4834,685.6544,377.9925,693.59,383.8257" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="AWS ALB for App Ingress" data-entity-2="AWS NLB for App Ingress" data-source-line="55" data-uid="lnk39" id="link_AWS ALB for App Ingress_AWS NLB for App Ingress"><path d="M324.32,277.5757 C330.27,279.4357 336.26,281.2657 342,282.9957 C402.63,301.2157 423.72,291.1357 479,321.9957 C507.73,338.0257 530.7518,360.239 547.9818,379.259" fill="none" id="AWS ALB for App Ingress-to-AWS NLB for App Ingress" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="552.01,383.7057,548.9321,374.3501,548.6531,380.0001,543.0032,379.7211,552.01,383.7057" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="AWS NLB for App Ingress" data-entity-2="nginx" data-source-line="56" data-uid="lnk40" id="link_AWS NLB for App Ingress_nginx"><path d="M599.82,430.7857 C649.93,470.1557 747.8124,547.0683 797.7324,586.2983" fill="none" id="AWS NLB for App Ingress-to-nginx" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="802.45,590.0057,797.8452,581.2996,798.5187,586.9162,792.9021,587.5897,802.45,590.0057" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="NAT_Gateway" data-entity-2="Squid_outbound_proxy" data-source-line="57" data-uid="lnk42" id="link_NAT_Gateway_Squid_outbound_proxy"><path d="M119.034,289.3621 C128.094,374.6221 159.58,670.6857 168.62,755.6457" fill="none" id="NAT_Gateway-backto-Squid_outbound_proxy" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="118.4,283.3957,115.3734,292.768,118.9283,288.3677,123.3286,291.9226,118.4,283.3957" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="NAT_Gateway" data-entity-2="Internet" data-source-line="58" data-uid="lnk43" id="link_NAT_Gateway_Internet"><path d="M125.48,236.2457 C140.72,199.9357 168.1378,134.5581 183.3078,98.4181" fill="none" id="NAT_Gateway-to-Internet" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="185.63,92.8857,178.4584,99.6361,183.6948,97.496,185.8349,102.7324,185.63,92.8857" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="nginx" data-entity-2="Issuer_UI" data-source-line="59" data-uid="lnk44" id="link_nginx_Issuer_UI"><path d="M844.69,636.8457 C860.8,663.1857 884.6605,702.2265 904.1805,734.1565" fill="none" id="nginx-to-Issuer_UI" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="907.31,739.2757,906.0285,729.5106,904.702,735.0097,899.2029,733.6833,907.31,739.2757" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_UI" data-entity-2="Issuer_Service" data-source-line="61" data-uid="lnk45" id="link_Issuer_UI_Issuer_Service"><path d="M933.81,818.8057 C935.19,837.7657 936.4067,854.5314 937.7767,873.4514" fill="none" id="Issuer_UI-to-Issuer_Service" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="938.21,879.4357,941.5496,870.1703,937.8489,874.4487,933.5705,870.7481,938.21,879.4357" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="VYI_services" data-entity-2="Issuer_Service" data-source-line="63" data-uid="lnk46" id="link_VYI_services_Issuer_Service"><path d="M813.2601,806.4414 C836.9501,827.1214 863.5791,850.3609 891.9091,875.0809" fill="none" id="VYI_services-Issuer_Service" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="808.74,802.4957,812.8896,811.4277,812.5067,805.7838,818.1506,805.401,808.74,802.4957" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="896.43,879.0257,892.2785,870.0945,892.6626,875.7384,887.0188,876.1224,896.43,879.0257" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ScotAccount_services" data-entity-2="Issuer_Service" data-source-line="64" data-uid="lnk47" id="link_ScotAccount_services_Issuer_Service"><path d="M676.5478,1079.8929 C691.1178,1053.7129 715.5,1016.0657 750,990.3657 C784.15,964.9257 822.7132,949.5165 860.0632,938.5465" fill="none" id="ScotAccount_services-Issuer_Service" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="673.63,1085.1357,681.5018,1079.2167,676.0615,1080.7667,674.5115,1075.3264,673.63,1085.1357" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="865.82,936.8557,856.0575,935.554,861.0226,938.2647,858.312,943.2298,865.82,936.8557" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="DynamoDB" data-source-line="66" data-uid="lnk48" id="link_Issuer_Service_DynamoDB"><path d="M1016.52,927.7457 C1142.23,941.7357 1388.11,973.5657 1464,1015.3657 C1490.9,1030.1857 1510.4089,1051.8494 1525.6889,1072.6594" fill="none" id="Issuer_Service-to-DynamoDB" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1529.24,1077.4957,1527.1375,1067.8739,1526.2807,1073.4655,1520.6892,1072.6087,1529.24,1077.4957" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="SecretsManager" data-source-line="67" data-uid="lnk49" id="link_Issuer_Service_SecretsManager"><path d="M1016.29,936.2457 C1080.24,951.7257 1173.4,978.1857 1249,1015.3657 C1283.33,1032.2557 1313.8535,1053.917 1339.1235,1073.787" fill="none" id="Issuer_Service-to-SecretsManager" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1343.84,1077.4957,1339.2376,1068.7883,1339.9095,1074.4051,1334.2927,1075.0771,1343.84,1077.4957" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="Connect2id" data-source-line="68" data-uid="lnk50" id="link_Issuer_Service_Connect2id"><path d="M865.55,929.1557 C827.16,938.1057 783.7,955.7157 760,990.3657 C748.06,1007.8257 783.4628,1051.778 809.6128,1080.658" fill="none" id="Issuer_Service-to-Connect2id" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="813.64,1085.1057,810.5643,1075.7494,810.284,1081.3993,804.6341,1081.119,813.64,1085.1057" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.6465" x="761" y="1003.4326">OAuth2 Token Exchnage</text></g><g class="link" data-entity-1="Locker_Service" data-entity-2="S3" data-source-line="70" data-uid="lnk51" id="link_Locker_Service_S3"><path d="M1186.26,1140.2857 C1200.92,1158.7557 1219.99,1182.7457 1237,1203.9657 C1247.35,1216.8757 1255.0567,1226.4307 1264.9167,1238.6207" fill="none" id="Locker_Service-to-S3" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1268.69,1243.2857,1266.14,1233.7727,1265.5456,1239.3982,1259.92,1238.8038,1268.69,1243.2857" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Locker_Service" data-entity-2="Connect2id" data-source-line="71" data-uid="lnk52" id="link_Locker_Service_Connect2id"><path d="M1139.67,1077.0857 C1120.67,1053.1557 1091,1022.1257 1056.5,1008.3357 C1022.93,994.9157 956.33,982.9457 912,1015.3657 C885.9,1034.4657 866.6543,1059.3508 852.8243,1080.1308" fill="none" id="Locker_Service-to-Connect2id" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="849.5,1085.1257,857.8164,1079.8496,852.2703,1080.9633,851.1566,1075.4171,849.5,1085.1257" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.8042" x="930.5" y="1003.4326">verify access token</text></g><g class="link" data-entity-1="Locker_Service" data-entity-2="KMS" data-source-line="72" data-uid="lnk53" id="link_Locker_Service_KMS"><path d="M1153.16,1140.4357 C1144.76,1169.6857 1133.8469,1207.659 1125.4569,1236.859" fill="none" id="Locker_Service-to-KMS" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1123.8,1242.6257,1130.1299,1235.0803,1125.1808,1237.8201,1122.4409,1232.8711,1123.8,1242.6257" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Issuer_Service" data-entity-2="Locker_Service" data-source-line="74" data-uid="lnk54" id="link_Issuer_Service_Locker_Service"><path d="M1016.35,956.9157 C1033.14,966.7057 1050.3,978.0357 1065,990.3657 C1095.36,1015.8457 1119.9699,1046.8581 1138.0199,1072.2081" fill="none" id="Issuer_Service-to-Locker_Service" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1141.5,1077.0957,1139.5382,1067.4442,1138.5999,1073.0227,1133.0214,1072.0844,1141.5,1077.0957" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="EKS_cluster" data-entity-2="CloudWatch" data-source-line="75" data-uid="lnk55" id="link_EKS_cluster_CloudWatch"><path d="M1289.1892,627.9693 C1289.3493,628.2339 1289.5115,628.5018 1289.6756,628.7729 C1290.0037,629.3152 1290.3397,629.8703 1290.6831,630.4377 C1296.1781,639.5173 1303.5925,651.7688 1311.8125,665.3519 C1328.2525,692.5182 1344.8088,719.8773 1358.7838,742.9723" fill="none" id="EKS_cluster-to-CloudWatch" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="1361.89,748.1057,1360.6529,738.3348,1359.3015,743.8279,1353.8084,742.4765,1361.89,748.1057" style="stroke:#E7E7E7;stroke-width:1;"/></g><rect fill="#222222" height="42.5938" rx="7.5" ry="7.5" style="stroke:#FFFFFF;stroke-width:1;" width="383.3105" x="1252.6895" y="1362.5557"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="362.7148" x="1257.6895" y="1380.5508">Dotted arrows represent direction of dependencies.</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="373.3105" x="1257.6895" y="1396.8477">HTTP-redirecting-to is not depicted by dotted arrows.</text></g></svg></div></div>

<h2 id="high-level-data-flow-diagram">High level data flow diagram</h2>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="895px" preserveAspectRatio="xMidYMid meet" style="width:905px;height:895px;background:#FFFFFF;" version="1.1" viewBox="0 0 905 895" width="905px" zoomAndPan="magnify" class="diagram"><title>High level data flow between components</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="332.3359" x="287.989" y="27.9951">High level data flow between components</text><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="320.2153" x="579.0986" y="297.5547"/><rect fill="none" height="220.0625" style="stroke:#000000;stroke-width:1.5;" width="691.7495" x="131.9736" y="386.9531"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="320.2153" x="579.0986" y="621.0156"/><g><title>Relying Party</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="54.5835" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="134.8906" y2="888.2109"/></g><g><title>Citizen/</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="185.8345" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="188.9736" x2="188.9736" y1="134.8906" y2="888.2109"/></g><g><title>ScotAccount</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="524.3931" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="527.6875" x2="527.6875" y1="134.8906" y2="888.2109"/></g><g><title>Issuer</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="617.7847" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="621.0986" x2="621.0986" y1="134.8906" y2="888.2109"/></g><g><title>VYI</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="791.5942" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="795.4653" x2="795.4653" y1="134.8906" y2="888.2109"/></g><g><title>Locker-</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="852.5186" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="855.7231" x2="855.7231" y1="134.8906" y2="888.2109"/></g><g class="participant participant-head" data-participant="RP"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107.167" x="5" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="12" y="123.5889">Relying Party</text></g><g class="participant participant-head" data-participant="Citizen"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.5957" x="160.5366" y="115.292">Citizen/</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7217" x="141.9736" y="131.5889">web browser</text><ellipse cx="189.8345" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M189.8345,58.7969 L189.8345,85.7969 M176.8345,66.7969 L202.8345,66.7969 M189.8345,85.7969 L176.8345,100.7969 M189.8345,85.7969 L202.8345,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ScotAccount"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4111" x="477.6875" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="484.6875" y="123.5889">ScotAccount</text></g><g class="participant participant-head" data-participant="Issuer"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.3721" x="589.0986" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="600.8052" y="107.292">Issuer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="51.3721" x="596.0986" y="123.5889">MySafe</text></g><g class="participant participant-head" data-participant="VYI"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="36.2578" x="777.4653" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.2578" x="784.4653" y="123.5889">VYI</text></g><g class="participant participant-head" data-participant="Locker"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.5908" x="823.7231" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.5908" x="830.7231" y="107.292">Locker-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.1484" x="831.4443" y="123.5889">service</text></g><g class="message" data-participant-1="Citizen" data-participant-2="RP"><polygon fill="#181818" points="69.5835,162.0234,59.5835,166.0234,69.5835,170.0234,65.5835,166.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="63.5835" x2="188.8345" y1="166.0234" y2="166.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="75.5835" y="160.9575">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="88.6289" y="160.9575"> </text></g><g class="message" data-participant-1="RP" data-participant-2="Citizen"><polygon fill="#181818" points="177.8345,191.1563,187.8345,195.1563,177.8345,199.1563,181.8345,195.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="58.5835" x2="183.8345" y1="195.1563" y2="195.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="65.5835" y="190.0903">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.2056" x="78.6289" y="190.0903">redirect to DIS</text></g><g class="message" data-participant-1="Citizen" data-participant-2="ScotAccount"><polygon fill="#181818" points="516.3931,220.2891,526.3931,224.2891,516.3931,228.2891,520.3931,224.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="189.8345" x2="522.3931" y1="224.2891" y2="224.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="219.2231">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.6533" x="209.8799" y="219.2231">sign me in</text></g><g class="message" data-participant-1="ScotAccount" data-participant-2="Citizen"><polygon fill="#181818" points="200.8345,249.4219,190.8345,253.4219,200.8345,257.4219,196.8345,253.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="527.3931" y1="253.4219" y2="253.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="206.8345" y="248.356">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0713" x="219.8799" y="248.356">redirect to Issuer</text></g><g class="message" data-participant-1="Citizen" data-participant-2="Issuer"><polygon fill="#181818" points="609.7847,278.5547,619.7847,282.5547,609.7847,286.5547,613.7847,282.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="189.8345" x2="615.7847" y1="282.5547" y2="282.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="277.4888">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.5405" x="209.8799" y="277.4888">(...)</text></g><path d="M579.0986,297.5547 L879.4014,297.5547 L879.4014,304.6875 L869.4014,314.6875 L579.0986,314.6875 L579.0986,297.5547" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="320.2153" x="579.0986" y="297.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="255.3027" x="594.0986" y="310.6216">OPTIONAL: reuse data from Locker</text><g class="message" data-participant-1="Issuer" data-participant-2="Locker"><polygon fill="#181818" points="844.5186,331.8203,854.5186,335.8203,844.5186,339.8203,848.5186,335.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="621.7847" x2="850.5186" y1="335.8203" y2="335.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="628.7847" y="330.7544">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.7905" x="641.8301" y="330.7544">pull citizen data</text></g><g class="message" data-participant-1="Locker" data-participant-2="Issuer"><polygon fill="#181818" points="632.7847,360.9531,622.7847,364.9531,632.7847,368.9531,628.7847,364.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="626.7847" x2="855.5186" y1="364.9531" y2="364.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="638.7847" y="359.8872">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="651.8301" y="359.8872"> </text></g><path d="M131.9736,386.9531 L285.5693,386.9531 L285.5693,394.0859 L275.5693,404.0859 L131.9736,404.0859 L131.9736,386.9531" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="220.0625" style="stroke:#000000;stroke-width:1.5;" width="691.7495" x="131.9736" y="386.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108.5957" x="146.9736" y="400.02">OPTIONAL: VYI</text><g class="message" data-participant-1="Issuer" data-participant-2="Citizen"><polygon fill="#181818" points="200.8345,421.2188,190.8345,425.2188,200.8345,429.2188,196.8345,425.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="620.7847" y1="425.2188" y2="425.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="206.8345" y="420.1528">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7773" x="219.8799" y="420.1528">redirect to VYI</text></g><g class="message" data-participant-1="Citizen" data-participant-2="VYI"><polygon fill="#181818" points="783.5942,450.3516,793.5942,454.3516,783.5942,458.3516,787.5942,454.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="189.8345" x2="789.5942" y1="454.3516" y2="454.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="449.2856">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.5596" x="209.8799" y="449.2856">undergo successful IDV</text></g><g class="message" data-participant-1="VYI" data-participant-2="Issuer"><polygon fill="#181818" points="632.7847,494.6172,622.7847,498.6172,632.7847,502.6172,628.7847,498.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="626.7847" x2="794.5942" y1="498.6172" y2="498.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="638.7847" y="485.9849">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.3423" x="660.8755" y="478.4185">push IDV results</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.7393" x="660.8755" y="493.5513">via backchannel</text></g><g class="message" data-participant-1="Issuer" data-participant-2="Issuer"><line style="stroke:#181818;stroke-width:1;" x1="621.7847" x2="663.7847" y1="527.75" y2="527.75"/><line style="stroke:#181818;stroke-width:1;" x1="663.7847" x2="663.7847" y1="527.75" y2="540.75"/><line style="stroke:#181818;stroke-width:1;" x1="622.7847" x2="663.7847" y1="540.75" y2="540.75"/><polygon fill="#181818" points="632.7847,536.75,622.7847,540.75,632.7847,544.75,628.7847,540.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="628.7847" y="522.6841">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.7188" x="650.8755" y="522.6841">verify VYI's signature</text></g><g class="message" data-participant-1="VYI" data-participant-2="Citizen"><polygon fill="#181818" points="200.8345,565.8828,190.8345,569.8828,200.8345,573.8828,196.8345,569.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="794.5942" y1="569.8828" y2="569.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="564.8169">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0713" x="228.9253" y="564.8169">redirect to Issuer</text></g><g class="message" data-participant-1="Citizen" data-participant-2="Issuer"><polygon fill="#181818" points="609.7847,595.0156,619.7847,599.0156,609.7847,603.0156,613.7847,599.0156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="189.8345" x2="615.7847" y1="599.0156" y2="599.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="196.8345" y="593.9497">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.5405" x="218.9253" y="593.9497">(...)</text></g><path d="M579.0986,621.0156 L852.7666,621.0156 L852.7666,628.1484 L842.7666,638.1484 L579.0986,638.1484 L579.0986,621.0156" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="320.2153" x="579.0986" y="621.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="228.668" x="594.0986" y="634.0825">OPTIONAL: save data to Locker</text><g class="message" data-participant-1="Issuer" data-participant-2="Locker"><polygon fill="#181818" points="844.5186,655.2813,854.5186,659.2813,844.5186,663.2813,848.5186,659.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="621.7847" x2="850.5186" y1="659.2813" y2="659.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="628.7847" y="654.2153">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.5791" x="650.8755" y="654.2153">push citizen data</text></g><g class="message" data-participant-1="Issuer" data-participant-2="Citizen"><polygon fill="#181818" points="200.8345,691.4141,190.8345,695.4141,200.8345,699.4141,196.8345,695.4141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="620.7847" y1="695.4141" y2="695.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="690.3481">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.0498" x="228.9253" y="690.3481">redirects to ScotAccount</text></g><g class="message" data-participant-1="Citizen" data-participant-2="ScotAccount"><polygon fill="#181818" points="516.3931,720.5469,526.3931,724.5469,516.3931,728.5469,520.3931,724.5469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="189.8345" x2="522.3931" y1="724.5469" y2="724.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="196.8345" y="719.481">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="218.9253" y="719.481"> </text></g><g class="message" data-participant-1="ScotAccount" data-participant-2="Citizen"><polygon fill="#181818" points="200.8345,749.6797,190.8345,753.6797,200.8345,757.6797,196.8345,753.6797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="527.3931" y1="753.6797" y2="753.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="748.6138">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.5254" x="228.9253" y="748.6138">redirects to RP - to finalize OIDC flow</text></g><g class="message" data-participant-1="Citizen" data-participant-2="RP"><polygon fill="#181818" points="69.5835,778.8125,59.5835,782.8125,69.5835,786.8125,65.5835,782.8125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="63.5835" x2="188.8345" y1="782.8125" y2="782.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="75.5835" y="777.7466">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="97.6743" y="777.7466"> </text></g><g class="message" data-participant-1="RP" data-participant-2="ScotAccount"><polygon fill="#181818" points="516.3931,807.9453,526.3931,811.9453,516.3931,815.9453,520.3931,811.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="58.5835" x2="522.3931" y1="811.9453" y2="811.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.5835" y="806.8794">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.0737" x="87.6743" y="806.8794">exchanges authorization code for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="84.7539" x="309.8804" y="806.8794">access token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.6265" x="398.7666" y="806.8794">(amongst others)</text></g><g class="message" data-participant-1="RP" data-participant-2="Issuer"><polygon fill="#181818" points="609.7847,837.0781,619.7847,841.0781,609.7847,845.0781,613.7847,841.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="58.5835" x2="615.7847" y1="841.0781" y2="841.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.5835" y="836.0122">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.4751" x="87.6743" y="836.0122">presents</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="84.7539" x="148.2817" y="836.0122">access token</text></g><g class="message" data-participant-1="Issuer" data-participant-2="RP"><polygon fill="#181818" points="69.5835,866.2109,59.5835,870.2109,69.5835,874.2109,65.5835,870.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="63.5835" x2="620.7847" y1="870.2109" y2="870.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="75.5835" y="865.145">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.5347" x="97.6743" y="865.145">returns JWT token with citizen data</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="895px" preserveAspectRatio="xMidYMid meet" style="width:905px;height:895px;background:#1B1B1B;" version="1.1" viewBox="0 0 905 895" width="905px" zoomAndPan="magnify" class="diagram"><title>High level data flow between components</title><defs/><g><rect fill="#1B1B1B" height="895" style="stroke:none;stroke-width:1;" width="905" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="332.3359" x="287.989" y="27.9951">High level data flow between components</text><rect fill="none" height="75.3984" style="stroke:#FFFFFF;stroke-width:1.5;" width="320.2153" x="579.0986" y="297.5547"/><rect fill="none" height="220.0625" style="stroke:#FFFFFF;stroke-width:1.5;" width="691.7495" x="131.9736" y="386.9531"/><rect fill="none" height="46.2656" style="stroke:#FFFFFF;stroke-width:1.5;" width="320.2153" x="579.0986" y="621.0156"/><g><title>Relying Party</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="54.5835" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="134.8906" y2="888.2109"/></g><g><title>Citizen/</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="185.8345" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="188.9736" x2="188.9736" y1="134.8906" y2="888.2109"/></g><g><title>ScotAccount</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="524.3931" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="527.6875" x2="527.6875" y1="134.8906" y2="888.2109"/></g><g><title>Issuer</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="617.7847" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="621.0986" x2="621.0986" y1="134.8906" y2="888.2109"/></g><g><title>VYI</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="791.5942" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="795.4653" x2="795.4653" y1="134.8906" y2="888.2109"/></g><g><title>Locker-</title><rect fill="#000000" fill-opacity="0.00000" height="753.3203" width="8" x="852.5186" y="134.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="855.7231" x2="855.7231" y1="134.8906" y2="888.2109"/></g><g class="participant participant-head" data-participant="RP"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="107.167" x="5" y="103.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="12" y="123.5889">Relying Party</text></g><g class="participant participant-head" data-participant="Citizen"><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.5957" x="160.5366" y="115.292">Citizen/</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7217" x="141.9736" y="131.5889">web browser</text><ellipse cx="189.8345" cy="50.7969" fill="#222222" rx="8" ry="8" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M189.8345,58.7969 L189.8345,85.7969 M176.8345,66.7969 L202.8345,66.7969 M189.8345,85.7969 L176.8345,100.7969 M189.8345,85.7969 L202.8345,100.7969" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ScotAccount"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="101.4111" x="477.6875" y="103.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="484.6875" y="123.5889">ScotAccount</text></g><g class="participant participant-head" data-participant="Issuer"><rect fill="#222222" height="46.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="65.3721" x="589.0986" y="87.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="600.8052" y="107.292">Issuer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="51.3721" x="596.0986" y="123.5889">MySafe</text></g><g class="participant participant-head" data-participant="VYI"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="36.2578" x="777.4653" y="103.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.2578" x="784.4653" y="123.5889">VYI</text></g><g class="participant participant-head" data-participant="Locker"><rect fill="#222222" height="46.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="65.5908" x="823.7231" y="87.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.5908" x="830.7231" y="107.292">Locker-</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.1484" x="831.4443" y="123.5889">service</text></g><g class="message" data-participant-1="Citizen" data-participant-2="RP"><polygon fill="#E7E7E7" points="69.5835,162.0234,59.5835,166.0234,69.5835,170.0234,65.5835,166.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="63.5835" x2="188.8345" y1="166.0234" y2="166.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="75.5835" y="160.9575">1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="88.6289" y="160.9575"> </text></g><g class="message" data-participant-1="RP" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="177.8345,191.1563,187.8345,195.1563,177.8345,199.1563,181.8345,195.1563" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="58.5835" x2="183.8345" y1="195.1563" y2="195.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="65.5835" y="190.0903">2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.2056" x="78.6289" y="190.0903">redirect to DIS</text></g><g class="message" data-participant-1="Citizen" data-participant-2="ScotAccount"><polygon fill="#E7E7E7" points="516.3931,220.2891,526.3931,224.2891,516.3931,228.2891,520.3931,224.2891" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="189.8345" x2="522.3931" y1="224.2891" y2="224.2891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="219.2231">3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.6533" x="209.8799" y="219.2231">sign me in</text></g><g class="message" data-participant-1="ScotAccount" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="200.8345,249.4219,190.8345,253.4219,200.8345,257.4219,196.8345,253.4219" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="527.3931" y1="253.4219" y2="253.4219"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="206.8345" y="248.356">4</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0713" x="219.8799" y="248.356">redirect to Issuer</text></g><g class="message" data-participant-1="Citizen" data-participant-2="Issuer"><polygon fill="#E7E7E7" points="609.7847,278.5547,619.7847,282.5547,609.7847,286.5547,613.7847,282.5547" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="189.8345" x2="615.7847" y1="282.5547" y2="282.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="277.4888">5</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.5405" x="209.8799" y="277.4888">(...)</text></g><path d="M579.0986,297.5547 L879.4014,297.5547 L879.4014,304.6875 L869.4014,314.6875 L579.0986,314.6875 L579.0986,297.5547" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#FFFFFF;stroke-width:1.5;" width="320.2153" x="579.0986" y="297.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="255.3027" x="594.0986" y="310.6216">OPTIONAL: reuse data from Locker</text><g class="message" data-participant-1="Issuer" data-participant-2="Locker"><polygon fill="#E7E7E7" points="844.5186,331.8203,854.5186,335.8203,844.5186,339.8203,848.5186,335.8203" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="621.7847" x2="850.5186" y1="335.8203" y2="335.8203"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="628.7847" y="330.7544">6</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.7905" x="641.8301" y="330.7544">pull citizen data</text></g><g class="message" data-participant-1="Locker" data-participant-2="Issuer"><polygon fill="#E7E7E7" points="632.7847,360.9531,622.7847,364.9531,632.7847,368.9531,628.7847,364.9531" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="626.7847" x2="855.5186" y1="364.9531" y2="364.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="638.7847" y="359.8872">7</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="651.8301" y="359.8872"> </text></g><path d="M131.9736,386.9531 L285.5693,386.9531 L285.5693,394.0859 L275.5693,404.0859 L131.9736,404.0859 L131.9736,386.9531" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="220.0625" style="stroke:#FFFFFF;stroke-width:1.5;" width="691.7495" x="131.9736" y="386.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108.5957" x="146.9736" y="400.02">OPTIONAL: VYI</text><g class="message" data-participant-1="Issuer" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="200.8345,421.2188,190.8345,425.2188,200.8345,429.2188,196.8345,425.2188" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="620.7847" y1="425.2188" y2="425.2188"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="206.8345" y="420.1528">8</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7773" x="219.8799" y="420.1528">redirect to VYI</text></g><g class="message" data-participant-1="Citizen" data-participant-2="VYI"><polygon fill="#E7E7E7" points="783.5942,450.3516,793.5942,454.3516,783.5942,458.3516,787.5942,454.3516" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="189.8345" x2="789.5942" y1="454.3516" y2="454.3516"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="196.8345" y="449.2856">9</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.5596" x="209.8799" y="449.2856">undergo successful IDV</text></g><g class="message" data-participant-1="VYI" data-participant-2="Issuer"><polygon fill="#E7E7E7" points="632.7847,494.6172,622.7847,498.6172,632.7847,502.6172,628.7847,498.6172" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="626.7847" x2="794.5942" y1="498.6172" y2="498.6172"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="638.7847" y="485.9849">10</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.3423" x="660.8755" y="478.4185">push IDV results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.7393" x="660.8755" y="493.5513">via backchannel</text></g><g class="message" data-participant-1="Issuer" data-participant-2="Issuer"><line style="stroke:#E7E7E7;stroke-width:1;" x1="621.7847" x2="663.7847" y1="527.75" y2="527.75"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="663.7847" x2="663.7847" y1="527.75" y2="540.75"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="622.7847" x2="663.7847" y1="540.75" y2="540.75"/><polygon fill="#E7E7E7" points="632.7847,536.75,622.7847,540.75,632.7847,544.75,628.7847,540.75" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="628.7847" y="522.6841">11</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.7188" x="650.8755" y="522.6841">verify VYI's signature</text></g><g class="message" data-participant-1="VYI" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="200.8345,565.8828,190.8345,569.8828,200.8345,573.8828,196.8345,569.8828" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="794.5942" y1="569.8828" y2="569.8828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="564.8169">12</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0713" x="228.9253" y="564.8169">redirect to Issuer</text></g><g class="message" data-participant-1="Citizen" data-participant-2="Issuer"><polygon fill="#E7E7E7" points="609.7847,595.0156,619.7847,599.0156,609.7847,603.0156,613.7847,599.0156" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="189.8345" x2="615.7847" y1="599.0156" y2="599.0156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="196.8345" y="593.9497">13</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.5405" x="218.9253" y="593.9497">(...)</text></g><path d="M579.0986,621.0156 L852.7666,621.0156 L852.7666,628.1484 L842.7666,638.1484 L579.0986,638.1484 L579.0986,621.0156" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#FFFFFF;stroke-width:1.5;" width="320.2153" x="579.0986" y="621.0156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="228.668" x="594.0986" y="634.0825">OPTIONAL: save data to Locker</text><g class="message" data-participant-1="Issuer" data-participant-2="Locker"><polygon fill="#E7E7E7" points="844.5186,655.2813,854.5186,659.2813,844.5186,663.2813,848.5186,659.2813" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="621.7847" x2="850.5186" y1="659.2813" y2="659.2813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="628.7847" y="654.2153">14</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.5791" x="650.8755" y="654.2153">push citizen data</text></g><g class="message" data-participant-1="Issuer" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="200.8345,691.4141,190.8345,695.4141,200.8345,699.4141,196.8345,695.4141" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="620.7847" y1="695.4141" y2="695.4141"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="690.3481">15</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.0498" x="228.9253" y="690.3481">redirects to ScotAccount</text></g><g class="message" data-participant-1="Citizen" data-participant-2="ScotAccount"><polygon fill="#E7E7E7" points="516.3931,720.5469,526.3931,724.5469,516.3931,728.5469,520.3931,724.5469" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="189.8345" x2="522.3931" y1="724.5469" y2="724.5469"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="196.8345" y="719.481">16</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="218.9253" y="719.481"> </text></g><g class="message" data-participant-1="ScotAccount" data-participant-2="Citizen"><polygon fill="#E7E7E7" points="200.8345,749.6797,190.8345,753.6797,200.8345,757.6797,196.8345,753.6797" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="194.8345" x2="527.3931" y1="753.6797" y2="753.6797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="206.8345" y="748.6138">17</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.5254" x="228.9253" y="748.6138">redirects to RP - to finalize OIDC flow</text></g><g class="message" data-participant-1="Citizen" data-participant-2="RP"><polygon fill="#E7E7E7" points="69.5835,778.8125,59.5835,782.8125,69.5835,786.8125,65.5835,782.8125" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="63.5835" x2="188.8345" y1="782.8125" y2="782.8125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="75.5835" y="777.7466">18</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="97.6743" y="777.7466"> </text></g><g class="message" data-participant-1="RP" data-participant-2="ScotAccount"><polygon fill="#E7E7E7" points="516.3931,807.9453,526.3931,811.9453,516.3931,815.9453,520.3931,811.9453" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="58.5835" x2="522.3931" y1="811.9453" y2="811.9453"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.5835" y="806.8794">19</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.0737" x="87.6743" y="806.8794">exchanges authorization code for</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="84.7539" x="309.8804" y="806.8794">access token</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.6265" x="398.7666" y="806.8794">(amongst others)</text></g><g class="message" data-participant-1="RP" data-participant-2="Issuer"><polygon fill="#E7E7E7" points="609.7847,837.0781,619.7847,841.0781,609.7847,845.0781,613.7847,841.0781" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="58.5835" x2="615.7847" y1="841.0781" y2="841.0781"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.5835" y="836.0122">20</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.4751" x="87.6743" y="836.0122">presents</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="84.7539" x="148.2817" y="836.0122">access token</text></g><g class="message" data-participant-1="Issuer" data-participant-2="RP"><polygon fill="#E7E7E7" points="69.5835,866.2109,59.5835,870.2109,69.5835,874.2109,65.5835,870.2109" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="63.5835" x2="620.7847" y1="870.2109" y2="870.2109"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="75.5835" y="865.145">21</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.5347" x="97.6743" y="865.145">returns JWT token with citizen data</text></g></g></svg></div></div>

<h2 id="mysafe-journey-save">MySafe journey (Save)</h2>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="511px" preserveAspectRatio="xMidYMid meet" style="width:658px;height:511px;background:#FFFFFF;" version="1.1" viewBox="0 0 658 511" width="658px" zoomAndPan="magnify" class="diagram"><title>Journey with VYI and saving into MySafe</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="320.4824" x="161.8079" y="22.9951">Journey with VYI and saving into MySafe</text><g class="entity" data-entity="RP" data-source-line="3" data-uid="ent0002" id="entity_RP"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.167" x="246.09" y="44.2969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="359.257" y="49.2969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="357.257" y="51.2969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="357.257" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="261.09" y="77.292">Relying Party</text></g><g class="entity" data-entity="SSO" data-source-line="4" data-uid="ent0003" id="entity_SSO"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.4111" x="123.97" y="167.5969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="231.3811" y="172.5969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="229.3811" y="174.5969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="229.3811" y="178.5969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="138.97" y="200.592">ScotAccount</text></g><g class="entity" data-entity="Issuer" data-source-line="7" data-uid="ent0006" id="entity_Issuer"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81.959" x="271.69" y="290.8969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="333.649" y="295.8969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="331.649" y="297.8969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="331.649" y="301.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="286.69" y="323.892">Issuer</text></g><g class="entity" data-entity="VYI" data-source-line="9" data-uid="ent0009" id="entity_VYI"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62.2578" x="105.54" y="459.1869"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="147.7978" y="464.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="145.7978" y="466.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="145.7978" y="470.1869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.2578" x="120.54" y="492.182">VYI</text></g><g class="entity" data-entity="MySafe" data-source-line="12" data-uid="ent0013" id="entity_MySafe"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.3721" x="506.99" y="459.1869"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="578.3621" y="464.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="576.3621" y="466.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="576.3621" y="470.1869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3721" x="521.99" y="492.182">MySafe</text></g><g class="link" data-entity-1="RP" data-entity-2="SSO" data-source-line="5" data-uid="lnk4" id="link_RP_SSO"><path d="M280.31,90.9169 C268.6,99.6369 255.59,110.0569 244.67,120.5969 C229.79,134.9669 218.6296,148.3045 207.8396,162.3845" fill="none" id="RP-to-SSO" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="204.19,167.1469,212.8393,162.4363,207.2313,163.1782,206.4895,157.5702,204.19,167.1469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.6548" x="245.67" y="133.6638">(1) requests verified data</text></g><g class="link" data-entity-1="SSO" data-entity-2="SSO" data-source-line="6" data-uid="lnk5" id="link_SSO_SSO"><path d="M251.75,179.2069 C271.19,179.4969 286.38,183.3369 286.38,190.7469 C286.38,198.1469 277.1893,201.9074 257.7493,202.1974" fill="none" id="SSO-to-SSO" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="251.75,202.2869,260.8087,206.1522,256.7494,202.2123,260.6893,198.1531,251.75,202.2869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.8359" x="292.38" y="195.3138">(2) sign-in/up</text></g><g class="link" data-entity-1="SSO" data-entity-2="Issuer" data-source-line="7" data-uid="lnk7" id="link_SSO_Issuer"><path d="M210.89,214.2769 C233.34,236.0669 262.8635,264.7091 285.2735,286.4491" fill="none" id="SSO-to-Issuer" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="289.58,290.6269,285.9054,281.4892,285.9912,287.1454,280.335,287.2312,289.58,290.6269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="258.66" y="256.9638">(3)</text></g><g class="link" data-entity-1="Issuer" data-entity-2="Issuer" data-source-line="8" data-uid="lnk8" id="link_Issuer_Issuer"><path d="M354.09,302.6669 C372.62,301.5769 388.65,305.3769 388.65,314.0369 C388.65,322.7069 378.6096,326.8592 360.0796,325.7692" fill="none" id="Issuer-to-Issuer" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="354.09,325.4169,362.8396,329.9385,359.0814,325.7105,363.3094,321.9523,354.09,325.4169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.5337" x="394.65" y="318.6038">(4) should we reuse Mysafe data?</text></g><g class="link" data-entity-1="Issuer" data-entity-2="VYI" data-source-line="9" data-uid="lnk10" id="link_Issuer_VYI"><path d="M271.43,316.2269 C199.26,319.2769 54.77,329.9769 23.67,367.1869 C6,388.3369 8.82,405.9769 23.67,429.1869 C41.49,457.0369 72.5196,468.8953 99.3196,474.9953" fill="none" id="Issuer-to-VYI" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="105.17,476.3269,97.2822,470.4292,100.2947,475.2172,95.5067,478.2297,105.17,476.3269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.5405" x="64.2476" y="395.2538">(5) No! Start IDV journey,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.6958" x="24.67" y="410.3866">rather than reusing data from Mysafe</text></g><g class="link" data-entity-1="VYI" data-entity-2="Issuer" data-source-line="11" data-uid="lnk12" id="link_VYI_Issuer"><path d="M168.08,477.1969 C198.94,471.5269 245.38,458.4769 273.67,429.1869 C298.12,403.8869 306.4707,368.5834 309.8807,343.2134" fill="none" id="VYI-to-Issuer" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="310.68,337.2669,305.5167,345.6538,310.0139,342.2223,313.4454,346.7195,310.68,337.2669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.3071" x="305.32" y="395.2538">(8) data handed over to Issuer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.0581" x="321.9445" y="410.3866">&amp; data removed from VYI</text></g><g class="link" data-entity-1="VYI" data-entity-2="VYI" data-source-line="10" data-uid="lnk11" id="link_VYI_VYI"><path d="M167.97,467.4269 C186.01,464.3869 202.8,469.3569 202.8,482.3369 C202.8,495.3269 191.926,501.2971 173.886,498.2471" fill="none" id="VYI-to-VYI" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="167.97,497.2469,176.1773,502.6912,172.9,498.0804,177.5109,494.8032,167.97,497.2469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.8276" x="230.9248" y="479.4038">(6) successful IDV,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.0771" x="208.8" y="494.5366">(7) consent to store page</text></g><g class="link" data-entity-1="Issuer" data-entity-2="MySafe" data-source-line="12" data-uid="lnk14" id="link_Issuer_MySafe"><path d="M354.01,314.9169 C398.63,317.0069 469.13,327.0769 512.67,367.1869 C538.77,391.2369 547.1106,427.3214 550.2706,453.1214" fill="none" id="Issuer-to-MySafe" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="551,459.0769,553.8762,449.6573,550.3921,454.114,545.9355,450.6299,551,459.0769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="589.0718" y="380.2538">(9)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.3193" x="563.1194" y="395.3866">OPTIONAL:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.6382" x="546.46" y="410.5194">store in Mysafe,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.0186" x="558.2698" y="425.6522">if consented</text></g><g class="link" data-entity-1="Issuer" data-entity-2="RP" data-source-line="13" data-uid="lnk15" id="link_Issuer_RP"><path d="M332.84,290.4969 C359.29,258.9969 403.72,198.7769 415.67,137.5969 C417.12,130.1769 419.63,127.0369 415.67,120.5969 C407.22,106.8469 399.1959,99.4171 384.9059,91.8071" fill="none" id="Issuer-to-RP" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="379.61,88.9869,385.6736,96.7478,384.0232,91.3371,389.434,89.6867,379.61,88.9869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.3008" x="407.53" y="187.8138">(10) data handed over</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8203" x="424.7702" y="202.9466">from Issuer to RP</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="511px" preserveAspectRatio="xMidYMid meet" style="width:658px;height:511px;background:#1B1B1B;" version="1.1" viewBox="0 0 658 511" width="658px" zoomAndPan="magnify" class="diagram"><title>Journey with VYI and saving into MySafe</title><defs/><g><rect fill="#1B1B1B" height="511" style="stroke:none;stroke-width:1;" width="658" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="320.4824" x="161.8079" y="22.9951">Journey with VYI and saving into MySafe</text><g class="entity" data-entity="RP" data-source-line="3" data-uid="ent0002" id="entity_RP"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.167" x="246.09" y="44.2969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="359.257" y="49.2969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="357.257" y="51.2969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="357.257" y="55.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="261.09" y="77.292">Relying Party</text></g><g class="entity" data-entity="SSO" data-source-line="4" data-uid="ent0003" id="entity_SSO"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="127.4111" x="123.97" y="167.5969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="231.3811" y="172.5969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="229.3811" y="174.5969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="229.3811" y="178.5969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="138.97" y="200.592">ScotAccount</text></g><g class="entity" data-entity="Issuer" data-source-line="7" data-uid="ent0006" id="entity_Issuer"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="81.959" x="271.69" y="290.8969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="333.649" y="295.8969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="331.649" y="297.8969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="331.649" y="301.8969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="286.69" y="323.892">Issuer</text></g><g class="entity" data-entity="VYI" data-source-line="9" data-uid="ent0009" id="entity_VYI"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="62.2578" x="105.54" y="459.1869"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="147.7978" y="464.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="145.7978" y="466.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="145.7978" y="470.1869"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.2578" x="120.54" y="492.182">VYI</text></g><g class="entity" data-entity="MySafe" data-source-line="12" data-uid="ent0013" id="entity_MySafe"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="91.3721" x="506.99" y="459.1869"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="578.3621" y="464.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="576.3621" y="466.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="576.3621" y="470.1869"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3721" x="521.99" y="492.182">MySafe</text></g><g class="link" data-entity-1="RP" data-entity-2="SSO" data-source-line="5" data-uid="lnk4" id="link_RP_SSO"><path d="M280.31,90.9169 C268.6,99.6369 255.59,110.0569 244.67,120.5969 C229.79,134.9669 218.6296,148.3045 207.8396,162.3845" fill="none" id="RP-to-SSO" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="204.19,167.1469,212.8393,162.4363,207.2313,163.1782,206.4895,157.5702,204.19,167.1469" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.6548" x="245.67" y="133.6638">(1) requests verified data</text></g><g class="link" data-entity-1="SSO" data-entity-2="SSO" data-source-line="6" data-uid="lnk5" id="link_SSO_SSO"><path d="M251.75,179.2069 C271.19,179.4969 286.38,183.3369 286.38,190.7469 C286.38,198.1469 277.1893,201.9074 257.7493,202.1974" fill="none" id="SSO-to-SSO" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="251.75,202.2869,260.8087,206.1522,256.7494,202.2123,260.6893,198.1531,251.75,202.2869" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.8359" x="292.38" y="195.3138">(2) sign-in/up</text></g><g class="link" data-entity-1="SSO" data-entity-2="Issuer" data-source-line="7" data-uid="lnk7" id="link_SSO_Issuer"><path d="M210.89,214.2769 C233.34,236.0669 262.8635,264.7091 285.2735,286.4491" fill="none" id="SSO-to-Issuer" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="289.58,290.6269,285.9054,281.4892,285.9912,287.1454,280.335,287.2312,289.58,290.6269" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="258.66" y="256.9638">(3)</text></g><g class="link" data-entity-1="Issuer" data-entity-2="Issuer" data-source-line="8" data-uid="lnk8" id="link_Issuer_Issuer"><path d="M354.09,302.6669 C372.62,301.5769 388.65,305.3769 388.65,314.0369 C388.65,322.7069 378.6096,326.8592 360.0796,325.7692" fill="none" id="Issuer-to-Issuer" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="354.09,325.4169,362.8396,329.9385,359.0814,325.7105,363.3094,321.9523,354.09,325.4169" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.5337" x="394.65" y="318.6038">(4) should we reuse Mysafe data?</text></g><g class="link" data-entity-1="Issuer" data-entity-2="VYI" data-source-line="9" data-uid="lnk10" id="link_Issuer_VYI"><path d="M271.43,316.2269 C199.26,319.2769 54.77,329.9769 23.67,367.1869 C6,388.3369 8.82,405.9769 23.67,429.1869 C41.49,457.0369 72.5196,468.8953 99.3196,474.9953" fill="none" id="Issuer-to-VYI" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="105.17,476.3269,97.2822,470.4292,100.2947,475.2172,95.5067,478.2297,105.17,476.3269" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.5405" x="64.2476" y="395.2538">(5) No! Start IDV journey,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.6958" x="24.67" y="410.3866">rather than reusing data from Mysafe</text></g><g class="link" data-entity-1="VYI" data-entity-2="Issuer" data-source-line="11" data-uid="lnk12" id="link_VYI_Issuer"><path d="M168.08,477.1969 C198.94,471.5269 245.38,458.4769 273.67,429.1869 C298.12,403.8869 306.4707,368.5834 309.8807,343.2134" fill="none" id="VYI-to-Issuer" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="310.68,337.2669,305.5167,345.6538,310.0139,342.2223,313.4454,346.7195,310.68,337.2669" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.3071" x="305.32" y="395.2538">(8) data handed over to Issuer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.0581" x="321.9445" y="410.3866">&amp; data removed from VYI</text></g><g class="link" data-entity-1="VYI" data-entity-2="VYI" data-source-line="10" data-uid="lnk11" id="link_VYI_VYI"><path d="M167.97,467.4269 C186.01,464.3869 202.8,469.3569 202.8,482.3369 C202.8,495.3269 191.926,501.2971 173.886,498.2471" fill="none" id="VYI-to-VYI" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="167.97,497.2469,176.1773,502.6912,172.9,498.0804,177.5109,494.8032,167.97,497.2469" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.8276" x="230.9248" y="479.4038">(6) successful IDV,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.0771" x="208.8" y="494.5366">(7) consent to store page</text></g><g class="link" data-entity-1="Issuer" data-entity-2="MySafe" data-source-line="12" data-uid="lnk14" id="link_Issuer_MySafe"><path d="M354.01,314.9169 C398.63,317.0069 469.13,327.0769 512.67,367.1869 C538.77,391.2369 547.1106,427.3214 550.2706,453.1214" fill="none" id="Issuer-to-MySafe" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="551,459.0769,553.8762,449.6573,550.3921,454.114,545.9355,450.6299,551,459.0769" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="589.0718" y="380.2538">(9)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.3193" x="563.1194" y="395.3866">OPTIONAL:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.6382" x="546.46" y="410.5194">store in Mysafe,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.0186" x="558.2698" y="425.6522">if consented</text></g><g class="link" data-entity-1="Issuer" data-entity-2="RP" data-source-line="13" data-uid="lnk15" id="link_Issuer_RP"><path d="M332.84,290.4969 C359.29,258.9969 403.72,198.7769 415.67,137.5969 C417.12,130.1769 419.63,127.0369 415.67,120.5969 C407.22,106.8469 399.1959,99.4171 384.9059,91.8071" fill="none" id="Issuer-to-RP" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="379.61,88.9869,385.6736,96.7478,384.0232,91.3371,389.434,89.6867,379.61,88.9869" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.3008" x="407.53" y="187.8138">(10) data handed over</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8203" x="424.7702" y="202.9466">from Issuer to RP</text></g></g></svg></div></div>

<h2 id="mysafe-journey-reuse">MySafe journey (Reuse)</h2>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="466px" preserveAspectRatio="xMidYMid meet" style="width:542px;height:466px;background:#FFFFFF;" version="1.1" viewBox="0 0 542 466" width="542px" zoomAndPan="magnify" class="diagram"><title>Journey with reusing data from MySafe</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="309.5176" x="109.5803" y="22.9951">Journey with reusing data from MySafe</text><g class="entity" data-entity="RP" data-source-line="3" data-uid="ent0002" id="entity_RP"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.167" x="129.12" y="44.2969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="242.287" y="49.2969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="240.287" y="51.2969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="240.287" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="144.12" y="77.292">Relying Party</text></g><g class="entity" data-entity="SSO" data-source-line="4" data-uid="ent0003" id="entity_SSO"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.4111" x="7" y="167.5969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="114.4111" y="172.5969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="112.4111" y="174.5969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="112.4111" y="178.5969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="22" y="200.592">ScotAccount</text></g><g class="entity" data-entity="Issuer" data-source-line="7" data-uid="ent0006" id="entity_Issuer"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81.959" x="154.73" y="290.8969"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="216.689" y="295.8969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="214.689" y="297.8969"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="214.689" y="301.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="169.73" y="323.892">Issuer</text></g><g class="entity" data-entity="MySafe" data-source-line="9" data-uid="ent0009" id="entity_MySafe"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.3721" x="150.02" y="414.1869"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="221.3921" y="419.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="219.3921" y="421.1869"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="219.3921" y="425.1869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3721" x="165.02" y="447.182">MySafe</text></g><g class="link" data-entity-1="RP" data-entity-2="SSO" data-source-line="5" data-uid="lnk4" id="link_RP_SSO"><path d="M163.34,90.9169 C151.64,99.6369 138.62,110.0569 127.71,120.5969 C112.82,134.9669 101.6696,148.3045 90.8796,162.3845" fill="none" id="RP-to-SSO" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="87.23,167.1469,95.8793,162.4363,90.2713,163.1782,89.5295,157.5702,87.23,167.1469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.6548" x="128.71" y="133.6638">(1) requests verified data</text></g><g class="link" data-entity-1="SSO" data-entity-2="SSO" data-source-line="6" data-uid="lnk5" id="link_SSO_SSO"><path d="M134.79,179.2069 C154.22,179.4969 169.41,183.3369 169.41,190.7469 C169.41,198.1469 160.2193,201.9073 140.7893,202.1973" fill="none" id="SSO-to-SSO" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="134.79,202.2869,143.8487,206.1521,139.7894,202.2123,143.7293,198.153,134.79,202.2869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.8359" x="175.41" y="195.3138">(2) sign-in/up</text></g><g class="link" data-entity-1="SSO" data-entity-2="Issuer" data-source-line="7" data-uid="lnk7" id="link_SSO_Issuer"><path d="M93.92,214.2769 C116.38,236.0669 145.8935,264.7091 168.3035,286.4491" fill="none" id="SSO-to-Issuer" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="172.61,290.6269,168.9354,281.4892,169.0212,287.1454,163.365,287.2312,172.61,290.6269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="141.69" y="256.9638">(3)</text></g><g class="link" data-entity-1="Issuer" data-entity-2="Issuer" data-source-line="8" data-uid="lnk8" id="link_Issuer_Issuer"><path d="M237.13,302.6669 C255.66,301.5769 271.69,305.3769 271.69,314.0369 C271.69,322.7069 261.6496,326.8592 243.1196,325.7692" fill="none" id="Issuer-to-Issuer" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="237.13,325.4169,245.8796,329.9385,242.1214,325.7105,246.3494,321.9523,237.13,325.4169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.5337" x="277.69" y="318.6038">(4) should we reuse Mysafe data?</text></g><g class="link" data-entity-1="Issuer" data-entity-2="MySafe" data-source-line="9" data-uid="lnk10" id="link_Issuer_MySafe"><path d="M195.71,343.5769 C195.71,365.3569 195.71,392.1869 195.71,413.9269" fill="none" id="Issuer-backto-MySafe" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="195.71,337.5769,191.71,346.5769,195.71,342.5769,199.71,346.5769,195.71,337.5769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337.9683" x="196.71" y="380.2538">(5) Yes! Issuer retrieves data from MySafe for reuse</text></g><g class="link" data-entity-1="Issuer" data-entity-2="RP" data-source-line="10" data-uid="lnk11" id="link_Issuer_RP"><path d="M215.88,290.4969 C242.32,258.9969 286.75,198.7769 298.71,137.5969 C300.15,130.1769 302.66,127.0369 298.71,120.5969 C290.26,106.8469 282.2359,99.4171 267.9459,91.8071" fill="none" id="Issuer-to-RP" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="262.65,88.9869,268.7136,96.7478,267.0632,91.3371,272.474,89.6867,262.65,88.9869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0298" x="290.57" y="187.8138">(6) data handed over</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8203" x="303.6747" y="202.9466">from Issuer to RP</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="466px" preserveAspectRatio="xMidYMid meet" style="width:542px;height:466px;background:#1B1B1B;" version="1.1" viewBox="0 0 542 466" width="542px" zoomAndPan="magnify" class="diagram"><title>Journey with reusing data from MySafe</title><defs/><g><rect fill="#1B1B1B" height="466" style="stroke:none;stroke-width:1;" width="542" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="309.5176" x="109.5803" y="22.9951">Journey with reusing data from MySafe</text><g class="entity" data-entity="RP" data-source-line="3" data-uid="ent0002" id="entity_RP"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.167" x="129.12" y="44.2969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="242.287" y="49.2969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="240.287" y="51.2969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="240.287" y="55.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.167" x="144.12" y="77.292">Relying Party</text></g><g class="entity" data-entity="SSO" data-source-line="4" data-uid="ent0003" id="entity_SSO"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="127.4111" x="7" y="167.5969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="114.4111" y="172.5969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="112.4111" y="174.5969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="112.4111" y="178.5969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4111" x="22" y="200.592">ScotAccount</text></g><g class="entity" data-entity="Issuer" data-source-line="7" data-uid="ent0006" id="entity_Issuer"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="81.959" x="154.73" y="290.8969"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="216.689" y="295.8969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="214.689" y="297.8969"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="214.689" y="301.8969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.959" x="169.73" y="323.892">Issuer</text></g><g class="entity" data-entity="MySafe" data-source-line="9" data-uid="ent0009" id="entity_MySafe"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="91.3721" x="150.02" y="414.1869"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="221.3921" y="419.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="219.3921" y="421.1869"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="219.3921" y="425.1869"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3721" x="165.02" y="447.182">MySafe</text></g><g class="link" data-entity-1="RP" data-entity-2="SSO" data-source-line="5" data-uid="lnk4" id="link_RP_SSO"><path d="M163.34,90.9169 C151.64,99.6369 138.62,110.0569 127.71,120.5969 C112.82,134.9669 101.6696,148.3045 90.8796,162.3845" fill="none" id="RP-to-SSO" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="87.23,167.1469,95.8793,162.4363,90.2713,163.1782,89.5295,157.5702,87.23,167.1469" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.6548" x="128.71" y="133.6638">(1) requests verified data</text></g><g class="link" data-entity-1="SSO" data-entity-2="SSO" data-source-line="6" data-uid="lnk5" id="link_SSO_SSO"><path d="M134.79,179.2069 C154.22,179.4969 169.41,183.3369 169.41,190.7469 C169.41,198.1469 160.2193,201.9073 140.7893,202.1973" fill="none" id="SSO-to-SSO" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="134.79,202.2869,143.8487,206.1521,139.7894,202.2123,143.7293,198.153,134.79,202.2869" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.8359" x="175.41" y="195.3138">(2) sign-in/up</text></g><g class="link" data-entity-1="SSO" data-entity-2="Issuer" data-source-line="7" data-uid="lnk7" id="link_SSO_Issuer"><path d="M93.92,214.2769 C116.38,236.0669 145.8935,264.7091 168.3035,286.4491" fill="none" id="SSO-to-Issuer" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="172.61,290.6269,168.9354,281.4892,169.0212,287.1454,163.365,287.2312,172.61,290.6269" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.4146" x="141.69" y="256.9638">(3)</text></g><g class="link" data-entity-1="Issuer" data-entity-2="Issuer" data-source-line="8" data-uid="lnk8" id="link_Issuer_Issuer"><path d="M237.13,302.6669 C255.66,301.5769 271.69,305.3769 271.69,314.0369 C271.69,322.7069 261.6496,326.8592 243.1196,325.7692" fill="none" id="Issuer-to-Issuer" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="237.13,325.4169,245.8796,329.9385,242.1214,325.7105,246.3494,321.9523,237.13,325.4169" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.5337" x="277.69" y="318.6038">(4) should we reuse Mysafe data?</text></g><g class="link" data-entity-1="Issuer" data-entity-2="MySafe" data-source-line="9" data-uid="lnk10" id="link_Issuer_MySafe"><path d="M195.71,343.5769 C195.71,365.3569 195.71,392.1869 195.71,413.9269" fill="none" id="Issuer-backto-MySafe" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="195.71,337.5769,191.71,346.5769,195.71,342.5769,199.71,346.5769,195.71,337.5769" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337.9683" x="196.71" y="380.2538">(5) Yes! Issuer retrieves data from MySafe for reuse</text></g><g class="link" data-entity-1="Issuer" data-entity-2="RP" data-source-line="10" data-uid="lnk11" id="link_Issuer_RP"><path d="M215.88,290.4969 C242.32,258.9969 286.75,198.7769 298.71,137.5969 C300.15,130.1769 302.66,127.0369 298.71,120.5969 C290.26,106.8469 282.2359,99.4171 267.9459,91.8071" fill="none" id="Issuer-to-RP" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="262.65,88.9869,268.7136,96.7478,267.0632,91.3371,272.474,89.6867,262.65,88.9869" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0298" x="290.57" y="187.8138">(6) data handed over</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8203" x="303.6747" y="202.9466">from Issuer to RP</text></g></g></svg></div></div>

<h2 id="mysafe-service-internal-components">MySafe Service internal components</h2>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="720px" preserveAspectRatio="xMidYMid meet" style="width:900px;height:720px;background:#FFFFFF;" version="1.1" viewBox="0 0 900 720" width="900px" zoomAndPan="magnify" class="diagram"><title>MySafe's components</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="172.2656" x="357.0152" y="22.9951">MySafe's components</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4.874" x="440.711" y="39.292"> </text><g class="cluster" data-entity="mysafeLocker" data-source-line="9" data-uid="ent0008" id="cluster_mysafeLocker"><rect fill="#F5F5F5" height="145.3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="253" x="230.6132" y="442.9638"/><rect fill="#F5F5F5" height="10" style="stroke:#181818;stroke-width:1;" width="15" x="463.6132" y="447.9638"/><rect fill="#F5F5F5" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="461.6132" y="449.9638"/><rect fill="#F5F5F5" height="2" style="stroke:#181818;stroke-width:1;" width="4" x="461.6132" y="453.9638"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.7666" x="309.7299" y="468.9589">«java/spring»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4.874" x="301.7694" y="485.2557"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110.6875" x="301.7694" y="501.5526">locker-service</text></g><g class="entity" data-entity="AWS Encryption SDK" data-source-line="10" data-uid="ent0009" id="entity_AWS Encryption SDK"><rect fill="#D3D3D3" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185.2158" x="255.0032" y="517.9638"/><rect fill="#D3D3D3" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="420.219" y="522.9638"/><rect fill="#D3D3D3" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="418.219" y="524.9638"/><rect fill="#D3D3D3" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="418.219" y="528.9638"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.2158" x="270.0032" y="550.9589">AWS Encryption SDK</text></g><g class="entity" data-entity="internal_others" data-source-line="3" data-uid="ent0002" id="entity_internal_others"><path d="M17.6495,94.1276 C19.8288,87.4581 25.3057,86.7045 29.2048,92.5383 C33.2662,87.6393 38.7441,87.7087 41.8178,93.6839 C44.5446,87.0425 48.7933,86.1629 53.5021,91.7975 C56.9926,84.8239 62.1572,85.7432 66.365,91.0458 C69.4074,85.8719 75.2296,85.9649 78.477,90.7977 C81.8987,85.5684 87.7337,85.6283 90.2349,91.7511 C94.3131,86.1491 97.9509,86.6873 101.5094,92.2748 C105.8147,85.4615 110.478,86.7068 114.3775,92.683 C117.8481,86.9736 122.7938,86.6828 126.6771,92.232 C130.0657,87.2489 135.2886,86.5194 138.423,92.5043 C142.1001,87.267 148.3344,86.9378 150.7389,93.7997 C155.1309,88.3391 158.597,88.8355 162.1063,94.6867 C170.1148,96.9318 173.3282,102.0228 167.6573,109.4214 C173.5229,116.5119 170.6293,121.943 162.7586,124.6006 C159.1199,130.9294 154.122,132.4264 149.3777,125.7369 C146.3813,130.9923 142.5611,130.6447 139.2655,126.0439 C135.8808,132.8369 129.6037,133.1851 125.2759,127.0657 C122.1016,132.4739 117.6551,132.4569 114.4765,127.07 C111.566,133.9511 106.9651,134.7787 101.7124,129.5359 C97.4572,135.1245 93.3068,135.497 89.3198,129.2549 C85.887,134.9143 80.4386,136.1325 76.6463,129.6295 C72.8157,134.5667 67.4237,133.9475 64.6325,128.4345 C60.8339,133.3146 56.2184,132.393 54.1118,126.7438 C49.8221,132.9571 45.5481,133.1299 40.9323,127.0948 C36.4245,132.9363 31.6729,133.2465 28.2983,126.001 C24.0545,131.9971 19.6686,130.6808 16.5425,124.8866 C8.0947,122.2482 6,115.0116 12.7385,108.7854 C6.527,102.5667 9.8299,95.6454 17.6495,94.1276" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.7148" x="22.7532" y="113.0289">ScotAccount &amp; IDV</text></g><g class="entity" data-entity="RPs" data-source-line="4" data-uid="ent0003" id="entity_RPs"><path d="M213.0779,93.8621 C216.4111,88.1784 221.9835,87.289 226.0465,93.0339 C229.1489,88.3786 234.2539,88.2887 237.3157,93.0824 C239.5038,88.0788 244.2073,85.9899 248.1422,91.2377 C253.1372,85.4297 257.3377,85.7881 261.8489,91.7987 C264.5093,85.4573 270.2032,85.1948 273.4869,91.2118 C276.742,85.8984 281.4963,86.405 284.2164,91.7503 C287.6296,85.705 292.3884,85.8586 295.6849,91.8614 C299.8931,85.4688 304.6677,85.9004 308.3957,92.3371 C312.119,86.7399 317.3261,88.3998 320.0265,93.4541 C324.5259,87.9758 328.7051,89.1906 332.1855,94.5928 C340.6109,96.1482 345.1939,102.5702 338.8728,110.3744 C341.7273,117.7079 339.7668,123.0015 331.1445,123.6578 C329.838,129.0096 325.4347,131.1762 321.1841,126.6163 C317.6429,134.0608 312.4014,132.8931 307.9074,127.6102 C305.0677,132.8448 299.6687,134.2827 295.7369,128.8572 C294.0734,134.6951 289.2668,135.6203 285.2719,131.2465 C281.5389,137.1283 276.5864,138.0212 271.8546,132.4128 C267.9269,137.5965 262.1956,137.0101 260.1614,130.5168 C256.3025,135.244 250.3364,135.8792 247.97,128.955 C244.233,133.8172 239.7065,133.4086 237.2152,127.6889 C232.4952,132.7264 228.4661,132.6618 225.5516,125.9036 C221.1459,131.7991 216.8812,132.1971 212.8654,125.5106 C203.186,124.2873 200.0049,119.1362 204.4856,110.1754 C198.548,100.6984 202.1358,94.4484 213.0779,93.8621" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.6787" x="219.2732" y="113.0289">Relying Parties</text></g><g class="entity" data-entity="S3" data-source-line="5" data-uid="ent0004" id="entity_S3"><path d="M333.7132,665.8838 C333.7132,655.8838 352.6101,655.8838 352.6101,655.8838 C352.6101,655.8838 371.5071,655.8838 371.5071,665.8838 L371.5071,691.1806 C371.5071,701.1806 352.6101,701.1806 352.6101,701.1806 C352.6101,701.1806 333.7132,701.1806 333.7132,691.1806 L333.7132,665.8838" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M333.7132,665.8838 C333.7132,675.8838 352.6101,675.8838 352.6101,675.8838 C352.6101,675.8838 371.5071,675.8838 371.5071,665.8838" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.7939" x="343.7132" y="692.8789">S3</text></g><g class="entity" data-entity="DynamoDB" data-source-line="6" data-uid="ent0005" id="entity_DynamoDB"><path d="M107.0532,528.4638 C107.0532,518.4638 156.6059,518.4638 156.6059,518.4638 C156.6059,518.4638 206.1586,518.4638 206.1586,528.4638 L206.1586,553.7606 C206.1586,563.7606 156.6059,563.7606 156.6059,563.7606 C156.6059,563.7606 107.0532,563.7606 107.0532,553.7606 L107.0532,528.4638" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M107.0532,528.4638 C107.0532,538.4638 156.6059,538.4638 156.6059,538.4638 C156.6059,538.4638 206.1586,538.4638 206.1586,528.4638" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.1055" x="117.0532" y="555.4589">DynamoDB</text></g><g class="entity" data-entity="mySafeFrontend" data-source-line="7" data-uid="ent0006" id="entity_mySafeFrontend"><rect fill="#F1F1F1" height="95.1875" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.3584" x="374.4332" y="60.5938"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="466.7916" y="65.5938"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="464.7916" y="67.5938"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="464.7916" y="71.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.7031" x="391.7608" y="93.5889">«node.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="389.4332" y="109.8857"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70.2188" x="389.4332" y="126.1826">issuer-UI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="72.3584" x="389.4332" y="142.4795">mySafe-UI</text></g><g class="entity" data-entity="mysafeService" data-source-line="8" data-uid="ent0007" id="entity_mysafeService"><rect fill="#F1F1F1" height="95.1875" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.0928" x="196.5632" y="216.7738"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="326.6559" y="221.7738"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="324.6559" y="223.7738"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="324.6559" y="227.7738"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.7666" x="219.2263" y="249.7689">«java/spring»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="211.5632" y="266.0657"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110.0928" x="211.5632" y="282.3626">issuer-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="108.1309" x="211.5632" y="298.6595">mySafe-service</text></g><g class="entity" data-entity="GMN14" data-source-line="17" data-uid="ent0015" id="entity_GMN14"><path d="M406.7532,643.2638 L406.7532,713.795 L788.4714,713.795 L788.4714,653.2638 L778.4714,643.2638 L406.7532,643.2638" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M778.4714,643.2638 L778.4714,653.2638 L788.4714,653.2638 L778.4714,643.2638" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="318.4302" x="412.7532" y="660.3306">Inner hardened locker aka &quot;locker service&quot;:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.7466" x="421.0178" y="675.4635">- verifies OAuth2 access token for each request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352.4536" x="421.0178" y="690.5963">- HTTPS API provides CRUD operations for citizen data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284.4766" x="421.0178" y="705.7291">- encrypts/decrypts data coming to/from S3</text></g><g class="link" data-entity-1="mySafeFrontend" data-entity-2="mysafeService" data-source-line="12" data-uid="lnk10" id="link_mySafeFrontend_mysafeService"><path d="M382.4732,155.8638 C362.7332,175.0138 344.2206,192.9569 324.4406,212.1369" fill="none" id="mySafeFrontend-to-mysafeService" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="320.1332,216.3138,329.3789,212.9202,323.7227,212.8331,323.8098,207.1769,320.1332,216.3138" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="mysafeService" data-entity-2="mysafeLocker" data-source-line="13" data-uid="lnk11" id="link_mysafeService_mysafeLocker"><path d="M346.9032,307.7038 C362.4332,317.9738 378.1432,329.5938 391.6132,341.9638 C426.6332,374.1438 437.6732,383.3438 456.6132,426.9638 C457.8626,429.8419 459.0301,432.7941 460.1211,435.8005 C460.6667,437.3037 461.1931,438.8204 461.701,440.3482 C461.955,441.1121 460.3843,436.1614 460.6291,436.9305" fill="none" id="mysafeService-to-mysafeLocker" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="462.4492,442.6478,463.5306,432.8585,460.9325,437.8834,455.9076,435.2852,462.4492,442.6478" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="412.6294" x="466.4349" y="355.0306">getCitizenData(CitizenAccountID, Oauth2_access_token) : JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="670.6834" y="370.1635"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="430.8281" x="461.4678" y="385.2963">addCitizenData(CitizenAccountID, Oauth2_access_token, newJWT)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="670.6834" y="400.4291"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="399.9468" x="472.7762" y="415.5619">deleteCitizenData(CitizenAccountID, Oauth2_access_token,..)</text></g><g class="link" data-entity-1="mysafeLocker" data-entity-2="S3" data-source-line="14" data-uid="lnk12" id="link_mysafeLocker_S3"><path d="M465.7631,588.4442 C465.7192,588.5472 465.6752,588.6501 465.6309,588.753 C465.5423,588.9587 465.453,589.1641 465.3629,589.3692 C465.1827,589.7793 464.9993,590.1882 464.8127,590.5955 C464.0663,592.2247 463.2685,593.8296 462.4158,595.3976 C460.7105,598.5338 458.7857,601.5225 456.6132,604.2638 C435.2132,631.2638 417.3032,622.7638 389.6132,643.2638 C383.5632,647.7438 381.7885,648.9895 376.2785,654.1095" fill="none" id="mysafeLocker-to-S3" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="371.8832,658.1938,381.199,654.9976,375.546,654.7902,375.7534,649.1372,371.8832,658.1938" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="mysafeService" data-entity-2="DynamoDB" data-source-line="15" data-uid="lnk13" id="link_mysafeService_DynamoDB"><path d="M218.5032,312.3438 C210.5332,321.4838 203.1432,331.5038 197.6132,341.9638 C166.6732,400.5138 159.3566,474.2809 157.4966,512.2709" fill="none" id="mysafeService-to-DynamoDB" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="157.2032,518.2638,161.6385,509.4701,157.4477,513.2697,153.6481,509.0789,157.2032,518.2638" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.3223" x="198.6132" y="385.0306">store &amp; retrieve session data</text></g><g class="link" data-entity-1="mysafeLocker" data-entity-2="GMN14" data-source-line="17" data-uid="lnk16" id="link_mysafeLocker_GMN14"><path d="M483.8472,551.2545 C484.5123,551.9928 485.2122,552.7696 485.9447,553.5828 C491.8051,560.0881 499.7569,568.915 508.7357,578.8813 C526.6932,598.8138 548.7582,623.3038 566.4132,642.8938" fill="none" id="mysafeLocker-GMN14" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/></g><g class="link" data-entity-1="internal_others" data-entity-2="mysafeService" data-source-line="22" data-uid="lnk17" id="link_internal_others_mysafeService"><path d="M119.812,135.4694 C146.082,157.5994 177.8748,184.3876 211.2948,212.5476" fill="none" id="internal_others-mysafeService" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="115.2232,131.6038,119.5293,140.4614,119.0472,134.8251,124.6834,134.343,115.2232,131.6038" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="215.8832,216.4138,211.5781,207.5556,212.0596,213.1919,206.4232,213.6734,215.8832,216.4138" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="RPs" data-entity-2="mysafeService" data-source-line="23" data-uid="lnk18" id="link_RPs_mysafeService"><path d="M271.6132,137.6038 C271.6132,159.7338 271.6132,182.2538 271.6132,210.4138" fill="none" id="RPs-mysafeService" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="271.6132,131.6038,267.6132,140.6038,271.6132,136.6038,275.6132,140.6038,271.6132,131.6038" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="271.6132,216.4138,275.6132,207.4138,271.6132,211.4138,267.6132,207.4138,271.6132,216.4138" style="stroke:#181818;stroke-width:1;"/></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="720px" preserveAspectRatio="xMidYMid meet" style="width:900px;height:720px;background:#1B1B1B;" version="1.1" viewBox="0 0 900 720" width="900px" zoomAndPan="magnify" class="diagram"><title>MySafe's components</title><defs/><g><rect fill="#1B1B1B" height="720" style="stroke:none;stroke-width:1;" width="900" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="172.2656" x="357.0152" y="22.9951">MySafe's components</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4.874" x="440.711" y="39.292"> </text><g class="cluster" data-entity="mysafeLocker" data-source-line="9" data-uid="ent0008" id="cluster_mysafeLocker"><rect fill="#F5F5F5" height="145.3" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:1;" width="253" x="230.6132" y="442.9638"/><rect fill="#F5F5F5" height="10" style="stroke:#E7E7E7;stroke-width:1;" width="15" x="463.6132" y="447.9638"/><rect fill="#F5F5F5" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="461.6132" y="449.9638"/><rect fill="#F5F5F5" height="2" style="stroke:#E7E7E7;stroke-width:1;" width="4" x="461.6132" y="453.9638"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.7666" x="309.7299" y="468.9589">«java/spring»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4.874" x="301.7694" y="485.2557"> </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110.6875" x="301.7694" y="501.5526">locker-service</text></g><g class="entity" data-entity="AWS Encryption SDK" data-source-line="10" data-uid="ent0009" id="entity_AWS Encryption SDK"><rect fill="#D3D3D3" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="185.2158" x="255.0032" y="517.9638"/><rect fill="#D3D3D3" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="420.219" y="522.9638"/><rect fill="#D3D3D3" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="418.219" y="524.9638"/><rect fill="#D3D3D3" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="418.219" y="528.9638"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.2158" x="270.0032" y="550.9589">AWS Encryption SDK</text></g><g class="entity" data-entity="internal_others" data-source-line="3" data-uid="ent0002" id="entity_internal_others"><path d="M17.6495,94.1276 C19.8288,87.4581 25.3057,86.7045 29.2048,92.5383 C33.2662,87.6393 38.7441,87.7087 41.8178,93.6839 C44.5446,87.0425 48.7933,86.1629 53.5021,91.7975 C56.9926,84.8239 62.1572,85.7432 66.365,91.0458 C69.4074,85.8719 75.2296,85.9649 78.477,90.7977 C81.8987,85.5684 87.7337,85.6283 90.2349,91.7511 C94.3131,86.1491 97.9509,86.6873 101.5094,92.2748 C105.8147,85.4615 110.478,86.7068 114.3775,92.683 C117.8481,86.9736 122.7938,86.6828 126.6771,92.232 C130.0657,87.2489 135.2886,86.5194 138.423,92.5043 C142.1001,87.267 148.3344,86.9378 150.7389,93.7997 C155.1309,88.3391 158.597,88.8355 162.1063,94.6867 C170.1148,96.9318 173.3282,102.0228 167.6573,109.4214 C173.5229,116.5119 170.6293,121.943 162.7586,124.6006 C159.1199,130.9294 154.122,132.4264 149.3777,125.7369 C146.3813,130.9923 142.5611,130.6447 139.2655,126.0439 C135.8808,132.8369 129.6037,133.1851 125.2759,127.0657 C122.1016,132.4739 117.6551,132.4569 114.4765,127.07 C111.566,133.9511 106.9651,134.7787 101.7124,129.5359 C97.4572,135.1245 93.3068,135.497 89.3198,129.2549 C85.887,134.9143 80.4386,136.1325 76.6463,129.6295 C72.8157,134.5667 67.4237,133.9475 64.6325,128.4345 C60.8339,133.3146 56.2184,132.393 54.1118,126.7438 C49.8221,132.9571 45.5481,133.1299 40.9323,127.0948 C36.4245,132.9363 31.6729,133.2465 28.2983,126.001 C24.0545,131.9971 19.6686,130.6808 16.5425,124.8866 C8.0947,122.2482 6,115.0116 12.7385,108.7854 C6.527,102.5667 9.8299,95.6454 17.6495,94.1276" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.7148" x="22.7532" y="113.0289">ScotAccount &amp; IDV</text></g><g class="entity" data-entity="RPs" data-source-line="4" data-uid="ent0003" id="entity_RPs"><path d="M213.0779,93.8621 C216.4111,88.1784 221.9835,87.289 226.0465,93.0339 C229.1489,88.3786 234.2539,88.2887 237.3157,93.0824 C239.5038,88.0788 244.2073,85.9899 248.1422,91.2377 C253.1372,85.4297 257.3377,85.7881 261.8489,91.7987 C264.5093,85.4573 270.2032,85.1948 273.4869,91.2118 C276.742,85.8984 281.4963,86.405 284.2164,91.7503 C287.6296,85.705 292.3884,85.8586 295.6849,91.8614 C299.8931,85.4688 304.6677,85.9004 308.3957,92.3371 C312.119,86.7399 317.3261,88.3998 320.0265,93.4541 C324.5259,87.9758 328.7051,89.1906 332.1855,94.5928 C340.6109,96.1482 345.1939,102.5702 338.8728,110.3744 C341.7273,117.7079 339.7668,123.0015 331.1445,123.6578 C329.838,129.0096 325.4347,131.1762 321.1841,126.6163 C317.6429,134.0608 312.4014,132.8931 307.9074,127.6102 C305.0677,132.8448 299.6687,134.2827 295.7369,128.8572 C294.0734,134.6951 289.2668,135.6203 285.2719,131.2465 C281.5389,137.1283 276.5864,138.0212 271.8546,132.4128 C267.9269,137.5965 262.1956,137.0101 260.1614,130.5168 C256.3025,135.244 250.3364,135.8792 247.97,128.955 C244.233,133.8172 239.7065,133.4086 237.2152,127.6889 C232.4952,132.7264 228.4661,132.6618 225.5516,125.9036 C221.1459,131.7991 216.8812,132.1971 212.8654,125.5106 C203.186,124.2873 200.0049,119.1362 204.4856,110.1754 C198.548,100.6984 202.1358,94.4484 213.0779,93.8621" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.6787" x="219.2732" y="113.0289">Relying Parties</text></g><g class="entity" data-entity="S3" data-source-line="5" data-uid="ent0004" id="entity_S3"><path d="M333.7132,665.8838 C333.7132,655.8838 352.6101,655.8838 352.6101,655.8838 C352.6101,655.8838 371.5071,655.8838 371.5071,665.8838 L371.5071,691.1806 C371.5071,701.1806 352.6101,701.1806 352.6101,701.1806 C352.6101,701.1806 333.7132,701.1806 333.7132,691.1806 L333.7132,665.8838" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M333.7132,665.8838 C333.7132,675.8838 352.6101,675.8838 352.6101,675.8838 C352.6101,675.8838 371.5071,675.8838 371.5071,665.8838" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.7939" x="343.7132" y="692.8789">S3</text></g><g class="entity" data-entity="DynamoDB" data-source-line="6" data-uid="ent0005" id="entity_DynamoDB"><path d="M107.0532,528.4638 C107.0532,518.4638 156.6059,518.4638 156.6059,518.4638 C156.6059,518.4638 206.1586,518.4638 206.1586,528.4638 L206.1586,553.7606 C206.1586,563.7606 156.6059,563.7606 156.6059,563.7606 C156.6059,563.7606 107.0532,563.7606 107.0532,553.7606 L107.0532,528.4638" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M107.0532,528.4638 C107.0532,538.4638 156.6059,538.4638 156.6059,538.4638 C156.6059,538.4638 206.1586,538.4638 206.1586,528.4638" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.1055" x="117.0532" y="555.4589">DynamoDB</text></g><g class="entity" data-entity="mySafeFrontend" data-source-line="7" data-uid="ent0006" id="entity_mySafeFrontend"><rect fill="#313139" height="95.1875" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="112.3584" x="374.4332" y="60.5938"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="466.7916" y="65.5938"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="464.7916" y="67.5938"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="464.7916" y="71.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.7031" x="391.7608" y="93.5889">«node.js»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="389.4332" y="109.8857"> </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70.2188" x="389.4332" y="126.1826">issuer-UI</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="72.3584" x="389.4332" y="142.4795">mySafe-UI</text></g><g class="entity" data-entity="mysafeService" data-source-line="8" data-uid="ent0007" id="entity_mysafeService"><rect fill="#313139" height="95.1875" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="150.0928" x="196.5632" y="216.7738"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="326.6559" y="221.7738"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="324.6559" y="223.7738"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="324.6559" y="227.7738"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.7666" x="219.2263" y="249.7689">«java/spring»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="211.5632" y="266.0657"> </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110.0928" x="211.5632" y="282.3626">issuer-service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="line-through" textLength="108.1309" x="211.5632" y="298.6595">mySafe-service</text></g><g class="entity" data-entity="GMN14" data-source-line="17" data-uid="ent0015" id="entity_GMN14"><path d="M406.7532,643.2638 L406.7532,713.795 L788.4714,713.795 L788.4714,653.2638 L778.4714,643.2638 L406.7532,643.2638" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M778.4714,643.2638 L778.4714,653.2638 L788.4714,653.2638 L778.4714,643.2638" fill="#714137" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="318.4302" x="412.7532" y="660.3306">Inner hardened locker aka &quot;locker service&quot;:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.7466" x="421.0178" y="675.4635">- verifies OAuth2 access token for each request</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352.4536" x="421.0178" y="690.5963">- HTTPS API provides CRUD operations for citizen data</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284.4766" x="421.0178" y="705.7291">- encrypts/decrypts data coming to/from S3</text></g><g class="link" data-entity-1="mySafeFrontend" data-entity-2="mysafeService" data-source-line="12" data-uid="lnk10" id="link_mySafeFrontend_mysafeService"><path d="M382.4732,155.8638 C362.7332,175.0138 344.2206,192.9569 324.4406,212.1369" fill="none" id="mySafeFrontend-to-mysafeService" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="320.1332,216.3138,329.3789,212.9202,323.7227,212.8331,323.8098,207.1769,320.1332,216.3138" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="mysafeService" data-entity-2="mysafeLocker" data-source-line="13" data-uid="lnk11" id="link_mysafeService_mysafeLocker"><path d="M346.9032,307.7038 C362.4332,317.9738 378.1432,329.5938 391.6132,341.9638 C426.6332,374.1438 437.6732,383.3438 456.6132,426.9638 C457.8626,429.8419 459.0301,432.7941 460.1211,435.8005 C460.6667,437.3037 461.1931,438.8204 461.701,440.3482 C461.955,441.1121 460.3843,436.1614 460.6291,436.9305" fill="none" id="mysafeService-to-mysafeLocker" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="462.4492,442.6478,463.5306,432.8585,460.9325,437.8834,455.9076,435.2852,462.4492,442.6478" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="412.6294" x="466.4349" y="355.0306">getCitizenData(CitizenAccountID, Oauth2_access_token) : JSON</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="670.6834" y="370.1635"> </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="430.8281" x="461.4678" y="385.2963">addCitizenData(CitizenAccountID, Oauth2_access_token, newJWT)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="670.6834" y="400.4291"> </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="399.9468" x="472.7762" y="415.5619">deleteCitizenData(CitizenAccountID, Oauth2_access_token,..)</text></g><g class="link" data-entity-1="mysafeLocker" data-entity-2="S3" data-source-line="14" data-uid="lnk12" id="link_mysafeLocker_S3"><path d="M465.7631,588.4442 C465.7192,588.5472 465.6752,588.6501 465.6309,588.753 C465.5423,588.9587 465.453,589.1641 465.3629,589.3692 C465.1827,589.7793 464.9993,590.1882 464.8127,590.5955 C464.0663,592.2247 463.2685,593.8296 462.4158,595.3976 C460.7105,598.5338 458.7857,601.5225 456.6132,604.2638 C435.2132,631.2638 417.3032,622.7638 389.6132,643.2638 C383.5632,647.7438 381.7885,648.9895 376.2785,654.1095" fill="none" id="mysafeLocker-to-S3" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="371.8832,658.1938,381.199,654.9976,375.546,654.7902,375.7534,649.1372,371.8832,658.1938" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="mysafeService" data-entity-2="DynamoDB" data-source-line="15" data-uid="lnk13" id="link_mysafeService_DynamoDB"><path d="M218.5032,312.3438 C210.5332,321.4838 203.1432,331.5038 197.6132,341.9638 C166.6732,400.5138 159.3566,474.2809 157.4966,512.2709" fill="none" id="mysafeService-to-DynamoDB" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="157.2032,518.2638,161.6385,509.4701,157.4477,513.2697,153.6481,509.0789,157.2032,518.2638" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.3223" x="198.6132" y="385.0306">store &amp; retrieve session data</text></g><g class="link" data-entity-1="mysafeLocker" data-entity-2="GMN14" data-source-line="17" data-uid="lnk16" id="link_mysafeLocker_GMN14"><path d="M483.8472,551.2545 C484.5123,551.9928 485.2122,552.7696 485.9447,553.5828 C491.8051,560.0881 499.7569,568.915 508.7357,578.8813 C526.6932,598.8138 548.7582,623.3038 566.4132,642.8938" fill="none" id="mysafeLocker-GMN14" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/></g><g class="link" data-entity-1="internal_others" data-entity-2="mysafeService" data-source-line="22" data-uid="lnk17" id="link_internal_others_mysafeService"><path d="M119.812,135.4694 C146.082,157.5994 177.8748,184.3876 211.2948,212.5476" fill="none" id="internal_others-mysafeService" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="115.2232,131.6038,119.5293,140.4614,119.0472,134.8251,124.6834,134.343,115.2232,131.6038" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="215.8832,216.4138,211.5781,207.5556,212.0596,213.1919,206.4232,213.6734,215.8832,216.4138" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="RPs" data-entity-2="mysafeService" data-source-line="23" data-uid="lnk18" id="link_RPs_mysafeService"><path d="M271.6132,137.6038 C271.6132,159.7338 271.6132,182.2538 271.6132,210.4138" fill="none" id="RPs-mysafeService" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#E7E7E7" points="271.6132,131.6038,267.6132,140.6038,271.6132,136.6038,275.6132,140.6038,271.6132,131.6038" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="271.6132,216.4138,275.6132,207.4138,271.6132,211.4138,267.6132,207.4138,271.6132,216.4138" style="stroke:#E7E7E7;stroke-width:1;"/></g></g></svg></div></div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../assets/mkdocs_puml/puml.js"></script>
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
        <script src="../assets/mkdocs_puml/interaction.js"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
